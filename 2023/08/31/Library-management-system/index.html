<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>图书管理系统 | ZACH</title><meta name="keywords" content="笔记"><meta name="author" content="Zach"><meta name="copyright" content="Zach"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="图书管理系统"><meta name="application-name" content="图书管理系统"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="图书管理系统"><meta property="og:url" content="https://blog.kinguo.fun/2023/08/31/Library-management-system/index.html"><meta property="og:site_name" content="ZACH"><meta property="og:description" content="一、准备阶段1.安装Eclipse插件Windowbuilder要在 Eclipse 中安装 WindowBuilder，请按照以下步骤操作：  打开 Eclipse。 选择“Help”（帮助）菜单，然后选择“Eclipse Marketplace”（Eclipse 市场）。 在搜索框中输入“Win"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://bu.dusays.com/2023/09/02/64f305f823e48.jpg"><meta property="article:author" content="Zach"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://bu.dusays.com/2023/09/02/64f305f823e48.jpg"><meta name="description" content="一、准备阶段1.安装Eclipse插件Windowbuilder要在 Eclipse 中安装 WindowBuilder，请按照以下步骤操作：  打开 Eclipse。 选择“Help”（帮助）菜单，然后选择“Eclipse Marketplace”（Eclipse 市场）。 在搜索框中输入“Win"><link rel="shortcut icon" href="https://cdn.kinguo.fun/icon.png"><link rel="canonical" href="https://blog.kinguo.fun/2023/08/31/Library-management-system/"><link rel="preconnect" href="//npm.elemecdn.com"/><link rel="preconnect" href="//npm.onmicrosoft.cn"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"Zach","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: {"enable":true,"ck":"3FbWkvRHkOIsydOy","LingQueMonitorID":"3FbWkvRHkOIsydOy"},
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://vercel.kinguo.fun/',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: {"mode":"cdn","api":"https://img2color-go.vercel.app/api?img=","cover_change":true},
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    simplehomepage: false,
    post: true
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Zach","link":"链接: ","source":"来源: ZACH","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#3b70fc","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'ZACH',
  title: '图书管理系统',
  postAI: '',
  pageFillDescription: '一、准备阶段, 1.安装Eclipse插件Windowbuilder, 2.创建数据库添加表, 3.用JDBC链接数据库, 1.创建工具包, 2.用JDBC链接数据库 分为以下步骤, 1.注册驱动, 2.获取链接*, 3.定义sql, 4.获取执行sql的对象 Statement*, 5.执行sql*, 6.处理结果, 7.释放资源, 4.导包, 5.测试数据库连接是否成功, 6.MVC模式, dao层, model层, Util层, view层 使用插件, 1.在设置标题时出现了WindowBuilder was not able to show the GUI, 二、登陆界面设计, 0. Swing基础概念, java.awt 包, javax.swing 包, 组件, 基本组件：, 容器组件：, 1.利用Windowbuilder的JFrame, ①其中调节到Design窗口并且设置标题和锁定窗口大小, ②界面布局选择, ③添加JLabel组件并且设置图标, ④给组件重命名, ⑤添加按钮登录和重置, ⑥新建事件, 1.重置事件, 2.登录事件, 3.连接数据库, 4.在User类中创建构造方法, 5.成功运行截图, , 6.编写过程中的问题, ⑦给登录界面居中显示, 三、系统主界面实现, 1.和前面一样还是使用Windowbuilder的JFrame, 2.使用Menu中的JMenuBar和JMenu, 3.JMenu和JMenultem的区别, 4.添加各按钮图标, 5.主页内部使用BorderLayout并使用JDesktopPane, JDesktopPane, 6.设置最大化, 7.与前面的登录界面进行互动, 四、设置内部窗体, 1.添加JInternalFrame, 2.关于作者界面打开可关闭和可缩小, 3.与前面的系统主界面联动 事件, Rename, 4.遇到的问题, 五、安全退出功能, 六、图书类别添加功能, 1.创建图书类别表 t_booktype, 2.新建图书类别实体与数据库连接, ①新建图书类别实体类, ②图书类别返回类以及实现添加操作, 3.创建BookTypeAddInterFrm的JInternalFrame的窗体, 4.图书类别添加事件处理, 5.遇到的问题, 七、图书类别查询功能, 1.在Dao层添加查询方法, 2.创建查询JInterna|Frame界面, 3.与数据库连接, ①写一个方法用来独立封装数据, ②在Mainfrm中添加事件, 4.根据输入的内容查询, ①创建窗口, ②添加事件, 5.遇到的问题, ①在测试查询功能时又出现空指针问题而且数据没有显示, ②在搜索过成又出现查询不到, 八、图书类别修改功能, 1.首先写dao层, 2.view层, 3重命名组件, 4.表格行点击事件处理事件, 5.修改事件, 6.遇到的问题, 九、图书类别删除功能, 1.图书类别删除事件处理, 十、图书添加功能, 1.为图书添加创建数据库, 2.新建架构设计, 3.创建实体model, 4.创建Book dao层, 5.创建view层, 6.与之前的主界面关联, 7.图书类别下拉框, ①在BookAddInterFrm中封装一个方法用于初始化图书类别下拉框, ②遇到的问题, 8.图书添加事件处理, 9.图书重置事件处理, ①测试一下, ②遇到的问题, 十一、图书查询功能, 1.图书查询功能实现, 2.实现内部窗体, 3.代码实现下拉菜单, 4.初始化表格数据, 5.图书查询事件处理, 6.出现的问题, 十二、图书修改与删除功能, 1.Dao层, 2.viem层, 3.表格行点击事件处理, 4.修改操作, 5.删除事件一准备阶段安装插件要在中安装请按照以下步骤操作打开选择帮助菜单然后选择市场在搜索框中输入然后按键选择工具并单击安装按钮按照安装向导的说明完成安装过程安装完成后重启安装完成后您将能够在中创建使用工具创建界面的应用程序创建数据库添加表用链接数据库创建工具包用链接数据库分为以下步骤注册驱动获取链接定义获取执行的对象执行处理结果释放资源下面是示例代码注册驱动获取连接定义获取执行的对象执行受影响的行数处理结果释放资源其中和实际上是相同的它们都指向本地计算机上的网络接口也就是回环接口是一个主机名指向回环接口的地址而是回环接口的地址因此它们都可以用来访问本地计算机上的服务导包测试数据库连接是否成功数据库连接成功模式模式将图书管理系统划分为模型视图和控制器三部分分别处理数据界面和业务逻辑的交互使系统的设计更加模块化和易于维护层层编号用户名密码层层使用插件过程中遇到的问题在设置标题时出现了最后发现这问题的主要原因是不支持以上的版本换成低版本就行了二登陆界面设计基础概念包是这三个单词首字母的缩写翻译过来是抽象窗口工具包只不过这个包的需要调用本地系统方法实现功能和本地系统有关联不利于代码移植属重量级控件包它是在的基础上建立的一套图形界面系统提供了更多的组件而且完全由实现增强了移植性属轻量级控件组件是具有图形表示的对象该图形表示可以显示在屏幕上并且可以与用户交互比如说在用户登录中文本框和按钮等都是能够表示图形的对象所以它们都称为组件基本组件具有图形表示的对象容器组件是可以添加组件的组件也就是在容器中可以通过方法添加组件既可以添加基本组件也可以添加容器组件这是按钮这是用来显示文本内容的或者展示图片使用这是文本框用来输入内容的这是文本域用来输入多行多列的数据的利用的其中调节到窗口并且设置标题和锁定窗口大小界面布局选择添加组件并且设置图标给组件重命名添加按钮登录和重置新建事件重置事件重置事件处理自动生成的方法存根登录事件登录事件处理自动生成的方法存根用户名不能为空密码不能为空判断是否是空判断是否不是空连接数据库在类中创建构造方法按住成功运行截图编写过程中的问题在编写完最后块时运行时出现查询语句的子句中使用了一个未知的列可能是由于列名拼写错误或列不存在等问题导致的需要检查查询语句的拼写和列名是否正确并确认数据库中是否存在该列错误最后修改了的列的名称给登录界面居中显示三系统主界面实现和前面一样还是使用的使用中的和和的区别是一个菜单栏中的一个菜单可以包含多个和其他作为子菜单形成多级菜单是中的一个菜单项通常用于执行特定操作的命令菜单项提供菜单层次结构的实现而提供执行具体操作的功能添加各按钮图标我的图标下载网站主页内部使用并使用是一个用于创建多文档界面的容器组件可以容纳多个内部窗口提供了窗口管理的功能使得应用程序更加灵活和易用设置最大化与前面的登录界面进行互动当中遇到的问题在是发现怎么也点不出方法最后发现是在包中的类中是小写四设置内部窗体添加是一个用于创建内部窗口的组件可以在中进行拖动和调整大小提供了窗口管理的功能使得应用程序看起来更像一个传统的桌面应用程序关于作者界面打开可关闭和可缩小与前面的系统主界面联动事件接着创建桌子命名命令用于重命名选定的组件例如按钮文本框或标签通过使用命令可以更改组件的名称使其更符合代码编写规范或更具描述性这可以提高代码的可读性减少出现错误的可能性除此之外重命名组件还可以自动更新所有使用该组件的代码和属性而不必手动更新每个使用该组件的位置从而提高了开发效率在这过程中遇到的问题要把在前面先声明后面才可以调用遇到的问题前面在主界面切换窗体时发现窗体一直处于最大化后面经过观察发现原来是我在创建时代码书写错误下面是修改后的代码五安全退出功能和之前一样添加事件为了确定是否退出我提供了选择为了查看弹出的提示框的值我这里采用输出语句可以看出是否取消当然这里也可以使用来查找接着使用语句来和来实现退出六图书类别添加功能创建图书类别表新建图书类别实体与数据库连接新建图书类别实体类图书类别返回类以及实现添加操作其中表示插入操作是目标表的名称表示插入的值表示在插入时自动生成主键是中的占位符用于表示将在执行语句时提供的变量因此整个语句的含义是向名为的数据库表中插入一行数据该行数据的第一列值为自动生成的主键值第二列的值为第一个所表示的值第三列的值为第二个所表示的值创建的的窗体使用布局接着在添加各种组件接着给图书类别名称改名和重置按钮新建事件把名称命名为把类别描述命名为把重置抽出来封装成私有方法图书类别添加事件处理遇到的问题在执行图书类别添加的添加测试时出现了空指针错误经过测试发现为空解决方法把实例化经过测试没有报错我上面红字的报错信息是大致意思是该警告意味着建立的数据库连接不是通过安全连接而是使用了非建议的方式建立连接这是因为为了与一些不使用的应用程序兼容连接的验证服务器证书的属性被设置为因此需要手动禁用或者提供相应的证书文件进行验证七图书类别查询功能在层添加查询方法该方法的输入参数是一个对象和一个对象对象用于连接数据库对象用于表示查询条件其中可以包含书籍类型名称等属性该方法首先创建一个对象将语句添加到缓冲区中如果对象的书籍类型名称不为空则将其添加到语句的末尾以便使用子句执行模糊匹配然后该方法创建一个对象将语句作为参数传递给它在此过程中方法使用方法将语句中的第一个关键字替换为关键字最后该方法执行查询并返回一个对象该对象包含查询结果调用者可以使用对象的方法来遍历查询结果并获取所需的数据创建查询界面把最小化和关闭打开接着添加各种组件添加在添加接着设置模型把不可编辑打开与数据库连接写一个方法用来独立封装数据把的名字改成初始化表格在中添加事件根据输入的内容查询创建窗口添加事件遇到的问题在测试查询功能时又出现空指针问题而且数据没有显示发现是我的语句中写错运行过后还是出现空指针问题最后在后面加查询成功根据网上查找的资料看的作用是通过调用将对象的属性设置为空字符串这样做的目的是为了在查询对象时不需要指定属性的值在方法中如果传入的对象的属性值为空字符串或则不会将作为查询条件即查询所有的书籍类型因此在这个方法中设置对象的属性为空字符串是为了查询所有的书籍类型并将它们添加到表格中如果不设置对象的属性为空字符串则可能只能查询到指定书籍类型的记录而无法查询到所有的书籍类型在搜索过成又出现查询不到优化了一下中的查询图书类别集合代码原先使用的代码如果返回空字符串那么语句中会出现关键字导致语法错误需要在拼接语句时先判断是否有查询条件如果没有则不需要添加关键字经过测试又出现连接警告接着我在数据库连接时禁用了恢复了正常但是在运行还是出现错误错误信息如下最后发现时赛中方法错误更正之后解决了问题之前代码更正之后之后终于可以查询还有一点在输入完名称后不要急着按回车不然按了回车键再点了查询会搜索不到具体原因我也不知道八图书类别修改功能首先写层层接着还是使用插件使用面板重命名组件分别给编号图书类别名称和描述重命名表格行点击事件处理事件给表创建事件用于表格行点击事件处理是一个计算机编程中的事件通常用于图形用户界面编程中这个事件会在鼠标按下的时候触发程序可以响应该事件并执行相应的代码测试成功修改事件请选择要修改的记录图书类别不能为空修改成功修改失败自动生成的块重置表单测试一下遇到的问题点击修改时发现错误科学类图书这是一本关于科学类结果发现是层中的的方法中语句写错修改成功九图书类别删除功能图书类别删除事件处理图书类别删除事件处理请选择要删除的记录确定要删除该记录吗删除成功删除失败自动生成的块十图书添加功能为图书添加创建数据库新建架构设计由于之前我的版本没有激活所以没有架构设计这一功能现在换成了版本的与的外键相连创建实体创建层创建层分别添加组件以及窗口作者性别男女的只能选中一个所以把他们分别存一个组里界面设计完成与之前的主界面关联添加事件图书添加图书类别下拉框在中封装一个方法用于初始化图书类别下拉框初始化图书类别下拉框遇到的问题结果测试发现没有正确显示要重写中的方法测试成功图书添加事件处理分别在中生成构造函数图书添加事件处理图书名称不能为空图书作者不能为空图书价格不能为空男女图书添加成功图书添加失败图书添加失败自动生成的块重置表单重置表单这段代码的意思是检查下拉框中是否有选项是一个方法用于获取下拉框中的选项数如果返回的值大于说明下拉框中至少有一个选项此时可以使用方法将第一个选项设为默认选中状态因此这段代码的作用是在重置表单值时如果下拉框中有选项则将第一个选项设为默认选中状态如果下拉框中没有选项这段代码不会执行任何操作图书重置事件处理测试一下遇到的问题这个错误信息表示在执行查询时存在语法错误消息建议检查服务器版本以确定使用正确的语法该错误发生在类的方法的第行堆栈跟踪还显示该错误是在类的第行调用方法触发的经过发现是我的表名写错了在测试一下在看一下数据库的信息成功添加十一图书查询功能图书查询功能实现层实现图书信息查询图书信息查询实现内部窗体添加与接着再中添加代码实现下拉菜单初始化下拉框下拉框类型请选择自动生成的块与前面主界面进行连接图书维护初始化表格数据初始化表格数据设置成行自动生成的块图书查询事件处理图书查询事件处理出现的问题错误信息出现在了语法上的错误原来的语句改进后的代码用于保存参数值的列表设置参数值当输入的参数的某些属性值为或空字符串时原来的代码会把相应的查询条件拼接到语句上从而导致语法错误为了避免这个问题我们需要先判断查询条件是否为空再拼接到语句上此外为了防止注入攻击我们应该使用的参数化查询方法而不是直接把参数拼接到语句中这个方法使用来构建语句把需要查询的表连接起来然后根据查询条件拼接子句并使用占位符来代替参数值同时为了方便设置参数值我们使用了一个列表来保存所有需要设置的参数值最后使用的方法来设置参数值并执行查询操作十二图书修改与删除功能层图书信息删除图书信息修改层表格行点击事件处理男女这段代码中的方法是一个鼠标按下事件的处理方法当用户在表格中选中某一行并按下鼠标时该方法就会被调用在该方法中首先获取用户所选行的行号然后根据行号从表格中获取该行的各个数据值并将这些数据值设置到对应的文本框下拉框和单选按钮中具体来说这段代码做了以下几件事情获取用户所选行的行号根据行号从表格中获取该行的各个数据值将数据值设置到对应的文本框下拉框和单选按钮中男女在这段代码中下拉框的选项是从数据库中读取的并转换为对象保存在下拉框中因此在设置下拉框选项时需要通过循环遍历下拉框的所有选项并将对象转换为字符串后与目标行的书籍类型名称进行比较从而找到对应的选项并将其设置为下拉框的选中项修改操作图书修改事件处理请选择要修改的记录图书名称不能为空图书作者不能为空图书价格不能为空男女图书修改成功图书修改失败图书修改失败自动生成的块重置表单测试删除事件图书删除事件处理请选择要删除的记录确定要删除该记录吗删除成功删除失败',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-12-04 16:26:59',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://bu.dusays.com/2023/07/24/64bdbe3230106.png"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">ZACH</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=7854846937&amp;server=netease"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://bu.dusays.com/2023/07/24/64be09a7804da.png" target="_blank"><img class="post-qr-code-img" alt="wechat" src="https://bu.dusays.com/2023/07/24/64be09a7804da.png"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://bu.dusays.com/2023/07/24/64be09a7804d9.png" target="_blank"><img class="post-qr-code-img" alt="alipay" src="https://bu.dusays.com/2023/07/24/64be09a7804d9.png"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">音乐</div><span class="author-content-item-title">灵魂的碰撞💥</span></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/08/"><span class="card-archive-list-date">八月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">四月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%A4%A7%E5%AD%A6%E7%94%9F%E6%B6%AF/" itemprop="url">大学生涯</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E7%AC%94%E8%AE%B0/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>笔记</span></a></span></div></div><h1 class="post-title" itemprop="name headline">图书管理系统</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-08-31T14:57:34.000Z" title="发表于 2023-08-31 22:57:34">2023-08-31</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-12-04T08:26:59.994Z" title="更新于 2024-12-04 16:26:59">2024-12-04</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">8.1k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>35分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="图书管理系统"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为昆明"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>昆明</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://bu.dusays.com/2023/09/02/64f305f823e48.jpg"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://blog.kinguo.fun/2023/08/31/Library-management-system/"><header><a class="post-meta-categories" href="/categories/%E5%A4%A7%E5%AD%A6%E7%94%9F%E6%B6%AF/" itemprop="url">大学生涯</a><a href="/tags/%E7%AC%94%E8%AE%B0/" tabindex="-1" itemprop="url">笔记</a><h1 id="CrawlerTitle" itemprop="name headline">图书管理系统</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Zach</span><time itemprop="dateCreated datePublished" datetime="2023-08-31T14:57:34.000Z" title="发表于 2023-08-31 22:57:34">2023-08-31</time><time itemprop="dateCreated datePublished" datetime="2024-12-04T08:26:59.994Z" title="更新于 2024-12-04 16:26:59">2024-12-04</time></header><h1 id="一、准备阶段"><a href="#一、准备阶段" class="headerlink" title="一、准备阶段"></a>一、准备阶段</h1><h2 id="1-安装Eclipse插件Windowbuilder"><a href="#1-安装Eclipse插件Windowbuilder" class="headerlink" title="1.安装Eclipse插件Windowbuilder"></a>1.安装Eclipse插件Windowbuilder</h2><p>要在 Eclipse 中安装 WindowBuilder，请按照以下步骤操作：</p>
<ol>
<li>打开 Eclipse。</li>
<li>选择“Help”（帮助）菜单，然后选择“Eclipse Marketplace”（Eclipse 市场）。</li>
<li>在搜索框中输入“WindowBuilder”，然后按 Enter 键。</li>
<li>选择 WindowBuilder 工具，并单击“Install”（安装）按钮。</li>
<li>按照安装向导的说明完成安装过程。</li>
<li>安装完成后，重启 Eclipse。</li>
</ol>
<p>安装完成后，您将能够在 Eclipse 中创建使用 WindowBuilder 工具创建 GUI 界面的 Java 应用程序。</p>
<h2 id="2-创建数据库添加表"><a href="#2-创建数据库添加表" class="headerlink" title="2.创建数据库添加表"></a>2.创建数据库添加表</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aaf342c0c.png" alt="image-20230216230823754"></p>
<h2 id="3-用JDBC链接数据库"><a href="#3-用JDBC链接数据库" class="headerlink" title="3.用JDBC链接数据库"></a>3.用JDBC链接数据库</h2><h3 id="1-创建工具包"><a href="#1-创建工具包" class="headerlink" title="1.创建工具包"></a><u>1.创建工具包</u><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:\Users\Zach\AppData\Roaming\Tencent\Users\1848713053\QQ\WinTemp\RichOle\A8FHOG97UQ1~6[R4_9QA@7K.png" alt="img" style="zoom: 50%;" /></h3><h3 id="2-用JDBC链接数据库-分为以下步骤"><a href="#2-用JDBC链接数据库-分为以下步骤" class="headerlink" title="2.用JDBC链接数据库 分为以下步骤"></a><u>2.用JDBC链接数据库 分为以下步骤</u></h3><h4 id="1-注册驱动"><a href="#1-注册驱动" class="headerlink" title="1.注册驱动"></a>1.注册驱动</h4><h4 id="2-获取链接"><a href="#2-获取链接" class="headerlink" title="2.获取链接*"></a>2.获取链接*</h4><h4 id="3-定义sql"><a href="#3-定义sql" class="headerlink" title="3.定义sql"></a>3.<em>定义sql</em></h4><h4 id="4-获取执行sql的对象-Statement"><a href="#4-获取执行sql的对象-Statement" class="headerlink" title="4.获取执行sql的对象 Statement*"></a>4.获取执行sql的对象 Statement*</h4><h4 id="5-执行sql"><a href="#5-执行sql" class="headerlink" title="5.执行sql*"></a>5.执行sql*</h4><h4 id="6-处理结果"><a href="#6-处理结果" class="headerlink" title="6.处理结果"></a>6.<em>处理结果</em></h4><h4 id="7-释放资源"><a href="#7-释放资源" class="headerlink" title="7.释放资源"></a>7.释放资源</h4><p><strong>下面是示例代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//1. 注册驱动</span></span><br><span class="line">        <span class="comment">//Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span></span><br><span class="line">        <span class="comment">//2. 获取连接</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://127.0.0.1:3306/db1&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;1234&quot;</span>;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(url, username, password);</span><br><span class="line">        <span class="comment">//3. 定义sql</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update account set money = 2000 where id = 1&quot;</span>;</span><br><span class="line">        <span class="comment">//4. 获取执行sql的对象 Statement</span></span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line">        <span class="comment">//5. 执行sql</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> stmt.executeUpdate(sql);<span class="comment">//受影响的行数</span></span><br><span class="line">        <span class="comment">//6. 处理结果</span></span><br><span class="line">        System.out.println(count);</span><br><span class="line">        <span class="comment">//7. 释放资源</span></span><br><span class="line">        stmt.close();</span><br><span class="line">        conn.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println();</span><br></pre></td></tr></table></figure>

<p><strong>其中”localhost”和”127.0.0.1”实际上是相同的，它们都指向本地计算机上的网络接口，也就是回环接口。”localhost”是一个主机名，指向回环接口的IP地址，而”127.0.0.1”是回环接口的IP地址。因此，它们都可以用来访问本地计算机上的服务。</strong> </p>
<h2 id="4-导包"><a href="#4-导包" class="headerlink" title="4.导包"></a>4.导包</h2><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aaf348269.png" alt="1" style="zoom:%;" />

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aaf6480aa.png" alt="image-20230211133406130" style="zoom:67%;" />

<h2 id="5-测试数据库连接是否成功"><a href="#5-测试数据库连接是否成功" class="headerlink" title="5.测试数据库连接是否成功"></a>5.测试数据库连接是否成功</h2><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aaf336e04.png" alt="image-20230211135257797" style="zoom:50%;" />

<p>数据库连接成功</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aaf230529.png" alt="image-20230211140354862"></p>
<h2 id="6-MVC模式"><a href="#6-MVC模式" class="headerlink" title="6.MVC模式"></a>6.MVC模式</h2><p><strong>MVC（Model-View-Controller）模式</strong>：将图书管理系统划分为模型、视图和控制器三部分，分别处理数据、界面和业务逻辑的交互，使系统的设计更加模块化和易于维护。</p>
<h3 id="dao层"><a href="#dao层" class="headerlink" title="dao层"></a>dao层</h3><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aaf18a4b8.png" alt="image-20230211142810497" style="zoom:50%;" />

<h3 id="model层"><a href="#model层" class="headerlink" title="model层"></a>model层</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> id;<span class="comment">//编号</span></span><br><span class="line">	<span class="keyword">private</span> String userName;<span class="comment">//用户名</span></span><br><span class="line">	<span class="keyword">private</span> String password;<span class="comment">//密码</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUserName</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> userName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserName</span><span class="params">(String userName)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.userName = userName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.password = password;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Util层"><a href="#Util层" class="headerlink" title="Util层"></a>Util层</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aaf3ea2ed.png" alt="image-20230216213528707"></p>
<h3 id="view层-使用插件"><a href="#view层-使用插件" class="headerlink" title="view层 使用插件"></a>view层 使用插件</h3><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aaf4e61bb.png" alt="image-20230211143119411" style="zoom: 67%;" />

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aaf657745.png" alt="image-20230211153710453"></p>
<p>过程中遇到的问题：</p>
<h5 id="1-在设置标题时出现了WindowBuilder-was-not-able-to-show-the-GUI"><a href="#1-在设置标题时出现了WindowBuilder-was-not-able-to-show-the-GUI" class="headerlink" title="1.在设置标题时出现了WindowBuilder was not able to show the GUI"></a>1.在设置标题时出现了WindowBuilder was not able to show the GUI</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aaf64fdb1.png" alt="image-20230211182502953">最后发现这问题的主要原因是 <u><strong>windowBuilder不支持java1.8以上的版本，换成低版本就行了。</strong></u></p>
<h1 id="二、登陆界面设计"><a href="#二、登陆界面设计" class="headerlink" title="二、登陆界面设计"></a>二、登陆界面设计</h1><h2 id="0-Swing基础概念"><a href="#0-Swing基础概念" class="headerlink" title="0. Swing基础概念"></a>0. Swing基础概念</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aaf5e42b5.png" alt="image-20230211184250098"></p>
<h4 id="java-awt-包"><a href="#java-awt-包" class="headerlink" title="java.awt 包"></a>java.awt 包</h4><p>awt是这三个单词首字母的缩写，翻译过来是抽象窗口工具包，只不过这个包的API，需要调用本地系<br>统方法实现功能，和本地系统有关联，不利于代码移植，属重量级控件</p>
<h4 id="javax-swing-包"><a href="#javax-swing-包" class="headerlink" title="javax.swing 包"></a>javax.swing 包</h4><p>它是在awt的基础上，建立的一套图形界面系统，提供了更多的组件，而且完全由Java实现。增强了移<br>植性，属轻量级控件</p>
<h4 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h4><p>是具有图形表示的对象，该图形表示可以显示在屏幕上并且可以与用户交互<br>比如说，在用户登录中，文本框和按钮等，都是能够表示图形的对象，所以它们都称为组件。</p>
<h5 id="基本组件："><a href="#基本组件：" class="headerlink" title="基本组件："></a>基本组件：</h5><p>​	具有图形表示的对象</p>
<h5 id="容器组件："><a href="#容器组件：" class="headerlink" title="容器组件："></a>容器组件：</h5><p>​	是可以添加组件的组件。也就是在容器中可以通过add方法添加组件，既可以添加基本组件，也可<br>​	以添加容器组件。</p>
<p>​	<strong>JButton</strong>，这是按钮<br>​	<strong>JLabel</strong>，这是用来显示文本内容的，或者展示图片使用<br>​	<strong>JTextFile</strong>，这是文本框，用来输入内容的<br>​	<strong>JTextArea</strong>，这是文本域，用来输入多行多列的数据的</p>
<h2 id="1-利用Windowbuilder的JFrame"><a href="#1-利用Windowbuilder的JFrame" class="headerlink" title="1.利用Windowbuilder的JFrame"></a>1.利用Windowbuilder的JFrame</h2><h3 id="①其中调节到Design窗口并且设置标题和锁定窗口大小"><a href="#①其中调节到Design窗口并且设置标题和锁定窗口大小" class="headerlink" title="①其中调节到Design窗口并且设置标题和锁定窗口大小"></a>①其中调节到Design窗口并且设置标题和锁定窗口大小</h3><ul>
<li></li>
</ul>
<h3 id="②界面布局选择"><a href="#②界面布局选择" class="headerlink" title="②界面布局选择"></a>②界面布局选择</h3><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aaf65b7dd.png" alt="image-20230211190338040" style="zoom: 67%;" />

<h3 id="③添加JLabel组件并且设置图标"><a href="#③添加JLabel组件并且设置图标" class="headerlink" title="③添加JLabel组件并且设置图标"></a>③添加JLabel组件并且设置图标</h3><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aaf78f4dc.png" alt="image-20230211190646520" style="zoom: 50%;" />

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aaf915506.png" alt="image-20230211193258782" style="zoom: 50%;" />

<h3 id="④给组件重命名"><a href="#④给组件重命名" class="headerlink" title="④给组件重命名"></a>④给组件重命名</h3><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aaf862cad.png" alt="image-20230211193447535" style="zoom:50%;" />

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aaf894c7c.png" alt="image-20230211193528645" style="zoom:50%;" />

<h3 id="⑤添加按钮登录和重置"><a href="#⑤添加按钮登录和重置" class="headerlink" title="⑤添加按钮登录和重置"></a>⑤添加按钮登录和重置</h3><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aaf903dad.png" alt="image-20230211212147203" style="zoom: 50%;" />

<h3 id="⑥新建事件"><a href="#⑥新建事件" class="headerlink" title="⑥新建事件"></a>⑥新建事件</h3><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aaf9e29f1.png" alt="image-20230211212811030" style="zoom:50%;" />

<h4 id="1-重置事件"><a href="#1-重置事件" class="headerlink" title="1.重置事件"></a>1.重置事件</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">​	 * 重置事件处理</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">​	 * **<span class="doctag">@param</span>** e</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">​	 */</span></span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span>** **<span class="keyword">void</span>** actionPerformed(ActionEvent e) &#123;</span><br><span class="line"></span><br><span class="line">​				resetValueActionPerformed(e);</span><br><span class="line"></span><br><span class="line">​	&#125;</span><br><span class="line"></span><br><span class="line">**<span class="keyword">private</span>** **<span class="keyword">void</span>** resetValueActionPerformed(ActionEvent e) &#123;</span><br><span class="line"></span><br><span class="line">​		<span class="comment">// **TODO** 自动生成的方法存根</span></span><br><span class="line"></span><br><span class="line">​		**<span class="built_in">this</span>**.userNameTxt.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">​		**<span class="built_in">this</span>**.passwordTxt.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">​	&#125;</span><br></pre></td></tr></table></figure>



<h4 id="2-登录事件"><a href="#2-登录事件" class="headerlink" title="2.登录事件"></a>2.登录事件</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">**<span class="keyword">public</span>** **<span class="keyword">void</span>** actionPerformed(ActionEvent e) &#123;</span><br><span class="line"></span><br><span class="line">​				loginActionPerformed(e);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">​	 * 登录事件处理</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">​	 * **<span class="doctag">@param</span>** e</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">​	 */</span></span><br><span class="line"></span><br><span class="line">​	**<span class="keyword">protected</span>** **<span class="keyword">void</span>** loginActionPerformed(ActionEvent e) &#123;</span><br><span class="line"></span><br><span class="line">​		<span class="comment">// **TODO** 自动生成的方法存根</span></span><br><span class="line"></span><br><span class="line">​		String userName=**<span class="built_in">this</span>**.userNameTxt.getText();</span><br><span class="line"></span><br><span class="line">​		String password=**<span class="keyword">new</span>** String(**<span class="built_in">this</span>**.passwordTxt.getPassword());</span><br><span class="line"></span><br><span class="line">​		**<span class="keyword">if</span>**(StringUtil.*isEmpty*(userName)) &#123;</span><br><span class="line"></span><br><span class="line">​			JOptionPane.*showMessageDialog*(**<span class="literal">null</span>**, <span class="string">&quot;用户名不能为空！&quot;</span>);</span><br><span class="line"></span><br><span class="line">​			**<span class="keyword">return</span>**;</span><br><span class="line"></span><br><span class="line">​		&#125;</span><br><span class="line"></span><br><span class="line">​		**<span class="keyword">if</span>**(StringUtil.*isEmpty*(password)) &#123;</span><br><span class="line"></span><br><span class="line">​			JOptionPane.*showMessageDialog*(**<span class="literal">null</span>**, <span class="string">&quot;密码不能为空！&quot;</span>);</span><br><span class="line"></span><br><span class="line">​			**<span class="keyword">return</span>**;</span><br><span class="line"></span><br><span class="line">​		&#125;</span><br><span class="line"></span><br><span class="line">​	&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringUtil</span> &#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 判断是否是空</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> str</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">(String str)</span> &#123;</span><br><span class="line">		<span class="keyword">if</span>(str==<span class="literal">null</span> || <span class="string">&quot;&quot;</span>.equals(str.trim())) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 判断是否不是空</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> str</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isNotEmpty</span><span class="params">(String str)</span> &#123;</span><br><span class="line">		<span class="keyword">if</span>(str==<span class="literal">null</span> &amp;&amp; <span class="string">&quot;&quot;</span>.equals(str.trim())) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="3-连接数据库"><a href="#3-连接数据库" class="headerlink" title="3.连接数据库"></a>3.连接数据库</h4><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aaf9b86aa.png" alt="image-20230211220943088" style="zoom: 67%;" />

<h4 id="4-在User类中创建构造方法"><a href="#4-在User类中创建构造方法" class="headerlink" title="4.在User类中创建构造方法"></a>4.在User类中创建构造方法</h4><p>按住Shif+alt+s</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aafac2b72.png" alt="image-20230211221217170" style="zoom:50%;" />

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aafad6f80.png" alt="image-20230211221316708" style="zoom:50%;" />

<p>![image-20230211222530477](..&#x2F;..&#x2F;AppData&#x2F;Roaming&#x2F;Typora&#x2F;typora-user-images&#x2F;image-20230211222530477.png</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aafcdd6ec.png" alt="image-20230211232719197" style="zoom: 67%;" />

<h4 id="5-成功运行截图"><a href="#5-成功运行截图" class="headerlink" title="5.成功运行截图"></a>5.成功运行截图</h4><h6 id=""><a href="#" class="headerlink" title=""></a><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aafc26e12.png" alt="image-20230211232907424" style="zoom:50%;" /></h6><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aafd66f4d.png" alt="image-20230211232940110" style="zoom:50%;" />

<h4 id="6-编写过程中的问题"><a href="#6-编写过程中的问题" class="headerlink" title="6.编写过程中的问题"></a>6.编写过程中的问题</h4><p>在编写完最后catch块时运行时出现*<u>查询语句的”where”子句中使用了一个未知的列”userName”。可能是由于列名拼写错误或列不存在等问题导致的。需要检查查询语句的拼写和列名是否正确，并确认数据库中是否存在该列。</u>*错误</p>
<p>最后修改了MySQL的user列的名称</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aafd26e7f.png" alt="image-20230211233233275" style="zoom:67%;" />

<h3 id="⑦给登录界面居中显示"><a href="#⑦给登录界面居中显示" class="headerlink" title="⑦给登录界面居中显示"></a>⑦给登录界面居中显示</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aafd34ea0.png" alt="image-20230212103047226"></p>
<h1 id="三、系统主界面实现"><a href="#三、系统主界面实现" class="headerlink" title="三、系统主界面实现"></a>三、系统主界面实现</h1><h2 id="1-和前面一样还是使用Windowbuilder的JFrame"><a href="#1-和前面一样还是使用Windowbuilder的JFrame" class="headerlink" title="1.和前面一样还是使用Windowbuilder的JFrame"></a>1.和前面一样还是使用Windowbuilder的JFrame</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aafe3c98e.png" alt="image-20230212092247698"></p>
<h2 id="2-使用Menu中的JMenuBar和JMenu"><a href="#2-使用Menu中的JMenuBar和JMenu" class="headerlink" title="2.使用Menu中的JMenuBar和JMenu"></a>2.使用Menu中的JMenuBar和JMenu</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aafe5210a.png" alt="image-20230212092649161"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aaffa90eb.png" alt="image-20230212093127944"></p>
<h2 id="3-JMenu和JMenultem的区别"><a href="#3-JMenu和JMenultem的区别" class="headerlink" title="3.JMenu和JMenultem的区别"></a>3.JMenu和JMenultem的区别</h2><p>JMenu是一个菜单栏中的一个菜单，可以包含多个JMenuItem和其他JMenu作为子菜单，形成多级菜单；</p>
<p>JMenuItem是JMenu中的一个菜单项，通常用于执行特定操作的命令菜单项。</p>
<p>JMenu提供菜单层次结构的实现，而JMenuItem提供执行具体操作的功能。</p>
<h2 id="4-添加各按钮图标"><a href="#4-添加各按钮图标" class="headerlink" title="4.添加各按钮图标"></a>4.添加各按钮图标</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0aaffa90eb.png" alt="image-20230212095928175"></p>
<p>我的图标下载网站 <a target="_blank" rel="noopener" href="https://www.flaticon.com/search?word=Exit">https://www.flaticon.com/search?word=Exit</a></p>
<h2 id="5-主页内部使用BorderLayout并使用JDesktopPane"><a href="#5-主页内部使用BorderLayout并使用JDesktopPane" class="headerlink" title="5.主页内部使用BorderLayout并使用JDesktopPane"></a>5.主页内部使用BorderLayout并使用JDesktopPane</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab002e976.png" alt="image-20230212102103679"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab000d9fc.png" alt="image-20230212102233577"></p>
<h3 id="JDesktopPane"><a href="#JDesktopPane" class="headerlink" title="JDesktopPane"></a><u>JDesktopPane</u></h3><p><u>是一个用于创建多文档界面的容器组件，可以容纳多个内部窗口，提供了窗口管理的功能，使得应用程序更加灵活和易用。</u></p>
<h2 id="6-设置最大化"><a href="#6-设置最大化" class="headerlink" title="6.设置最大化"></a>6.设置最大化</h2><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab006f029.png" alt="image-20230212102626433" style="zoom:50%;" />

<h2 id="7-与前面的登录界面进行互动"><a href="#7-与前面的登录界面进行互动" class="headerlink" title="7.与前面的登录界面进行互动"></a>7.与前面的登录界面进行互动</h2><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab014c2bb.png" alt="image-20230212103727004" style="zoom: 67%;" />

<p>当中遇到的问题 在new MainFrm是发现怎么也点不出方法，最后发现是在view包中的MainFrm类中F是小写<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="D:/Blog2/AppData/Roaming/Typora/typora-user-images/image-20230212103918190.png" alt="image-20230212103918190"></p>
<h1 id="四、设置内部窗体"><a href="#四、设置内部窗体" class="headerlink" title="四、设置内部窗体"></a>四、设置内部窗体</h1><h2 id="1-添加JInternalFrame"><a href="#1-添加JInternalFrame" class="headerlink" title="1.添加JInternalFrame"></a>1.添加JInternalFrame</h2><p>JInternalFrame是一个用于创建内部窗口的Swing组件，可以在JDesktopPane中进行拖动和调整大小，提供了窗口管理的功能，使得应用程序看起来更像一个传统的桌面应用程序</p>
<h2 id="2-关于作者界面打开可关闭和可缩小"><a href="#2-关于作者界面打开可关闭和可缩小" class="headerlink" title="2.关于作者界面打开可关闭和可缩小"></a>2.关于作者界面打开可关闭和可缩小</h2><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab020ead6.png" alt="image-20230212104950904" style="zoom:67%;" />

<h2 id="3-与前面的系统主界面联动-事件"><a href="#3-与前面的系统主界面联动-事件" class="headerlink" title="3.与前面的系统主界面联动 事件"></a>3.与前面的系统主界面联动 事件</h2><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab03846d0.png" alt="image-20230212105622936" style="zoom:67%;" />

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab0253b0d.png" alt="image-20230212105909473"></p>
<p>接着创建桌子命名</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab038bd2c.png" alt="image-20230212105947448" style="zoom:50%;" />

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab03846d0.png" alt="image-20230212110258449"></p>
<h3 id="Rename"><a href="#Rename" class="headerlink" title="Rename"></a>Rename</h3><p>命令用于重命名选定的GUI组件，例如按钮、文本框或标签</p>
<p>通过使用Rename命令，可以更改组件的名称，使其更符合代码编写规范或更具描述性。这可以提高代码的可读性，减少出现错误的可能性。</p>
<p>除此之外，重命名组件还可以自动更新所有使用该组件的代码和属性，而不必手动更新每个使用该组件的位置，从而提高了开发效率。</p>
<p>在这过程中遇到的问题</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab03b4598.png" alt="image-20230212111501864"></p>
<p>要把</p>
<p>JPanel table在前面先声明 后面才可以调用table</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab040fc06.png" alt="image-20230212111549168" style="zoom: 67%;" />

<h2 id="4-遇到的问题"><a href="#4-遇到的问题" class="headerlink" title="4.遇到的问题"></a>4.遇到的问题</h2><p>前面在主界面切换窗体时发现窗体一直处于最大化 后面经过观察发现原来是我在创建table时代码书写错误</p>
<p>下面是Mainfrm修改后的代码</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab0488cc8.png" alt="image-20230212125654428" style="zoom:67%;" />

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab0653ed1.png" alt="image-20230212125657973" style="zoom:67%;" />

<h1 id="五、安全退出功能"><a href="#五、安全退出功能" class="headerlink" title="五、安全退出功能"></a>五、安全退出功能</h1><p>和之前一样添加事件</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab06399ee.png" alt="image-20230212130643411" style="zoom:67%;" />

<p>为了确定是否退出 我提供了选择</p>
<p>为了查看弹出的提示框的 result 值我这里采用输出语句</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab06565e4.png" alt="image-20230212131416688" style="zoom:67%;" />

<p>可以看出是 0  否 1 取消2 当然这里也可以使用 Debug 来查找</p>
<p>接着使用if语句来和 dispose()来实现退出</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab0631b68.png" alt="image-20230212131800553"></p>
<h1 id="六、图书类别添加功能"><a href="#六、图书类别添加功能" class="headerlink" title="六、图书类别添加功能"></a>六、图书类别添加功能</h1><h2 id="1-创建图书类别表-t-booktype"><a href="#1-创建图书类别表-t-booktype" class="headerlink" title="1.创建图书类别表 t_booktype"></a>1.创建图书类别表 t_booktype</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab06cd685.png" alt="image-20230212202805296"></p>
<h2 id="2-新建图书类别实体与数据库连接"><a href="#2-新建图书类别实体与数据库连接" class="headerlink" title="2.新建图书类别实体与数据库连接"></a>2.新建图书类别实体与数据库连接</h2><h3 id="①新建图书类别实体类"><a href="#①新建图书类别实体类" class="headerlink" title="①新建图书类别实体类"></a>①新建图书类别实体类</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab08bf01c.png" alt="image-20230212203346871"></p>
<h3 id="②图书类别返回类以及实现添加操作"><a href="#②图书类别返回类以及实现添加操作" class="headerlink" title="②图书类别返回类以及实现添加操作"></a>②图书类别返回类以及实现添加操作</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab090896e.png" alt="image-20230212204821259"></p>
<p>其中  <code>&quot;insert into t_bookType values(null,?,?)&quot;</code></p>
<p><code>insert into</code> 表示插入操作</p>
<p><code>t_bookType</code> 是目标表的名称</p>
<p><code>values</code> 表示插入的值</p>
<p><code>null</code> 表示在插入时自动生成主键</p>
<p><code>?</code> 是 SQL 中的占位符，用于表示将在执行 SQL 语句时提供的变量。</p>
<p><u><strong>因此，整个 SQL 语句的含义是向名为 <code>t_bookType</code> 的数据库表中插入一行数据，该行数据的第一列值为自动生成的主键值，第二列的值为第一个 <code>?</code> 所表示的值，第三列的值为第二个 <code>?</code> 所表示的值。</strong></u></p>
<h2 id="3-创建BookTypeAddInterFrm的JInternalFrame的窗体"><a href="#3-创建BookTypeAddInterFrm的JInternalFrame的窗体" class="headerlink" title="3.创建BookTypeAddInterFrm的JInternalFrame的窗体"></a>3.创建BookTypeAddInterFrm的JInternalFrame的窗体</h2><p>Properties使用GroupLayout布局</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab0934a32.png" alt="image-20230212205933213"></p>
<p>接着在添加各种组件</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab096b9f2.png" alt="image-20230212211345766"></p>
<p>接着给图书类别名称改名 和 重置按钮新建事件</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab0b25deb.png" alt="image-20230214121737669"></p>
<p>把名称命名为 bookTypeNameTxt</p>
<p>把类别描述命名为 bookTypeDescTxt</p>
<p>!(assets&#x2F;image-20230214121840689-16763483223985.png)</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab0abe38f.png" alt="image-20230214122005098"></p>
<p>把重置抽出来封装成私有方法</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab0b2c4ca.png" alt="image-20230214123834610"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab0bc5210.png" alt="image-20230214123851110"></p>
<h2 id="4-图书类别添加事件处理"><a href="#4-图书类别添加事件处理" class="headerlink" title="4.图书类别添加事件处理"></a>4.图书类别添加事件处理</h2><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab0be2623.png" alt="image-20230215145358772" style="zoom:67%;" />

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab0c26730.png" alt="image-20230215145405812"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab0d31c0f.png" alt="image-20230215145409778"></p>
<h2 id="5-遇到的问题"><a href="#5-遇到的问题" class="headerlink" title="5.遇到的问题"></a>5.遇到的问题</h2><p>在执行图书类别添加的添加测试时出现了空指针错误</p>
<p>java.lang.NullPointerException</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab0e1f16a.png" alt="image-20230215145700776"></p>
<p>经过Debug测试发现con为空</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab0e2e0c3.png" alt="image-20230215150456359"></p>
<p>解决方法 把con实例化</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab0e3b4db.png" alt="image-20230215150608054"></p>
<p>经过测试没有报错</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab0e554de.png" alt="image-20230215150731587"></p>
<p>我上面红字的报错信息是</p>
<p>Wed Feb 15 15:06:44 CST 2023 WARN: Establishing SSL connection without server’s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn’t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to ‘false’. You need either to explicitly disable SSL by setting useSSL&#x3D;false, or set useSSL&#x3D;true and provide truststore for server certificate verification</p>
<p>大致意思是该警告意味着建立的数据库连接不是通过 SSL 安全连接，而是使用了非建议的方式建立连接。这是因为为了与一些不使用 SSL 的应用程序兼容，SSL 连接的验证服务器证书的属性被设置为 “false”，因此需要手动禁用 SSL 或者提供相应的证书文件进行验证。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab1113d4d.png" alt="image-20230215150902652"></p>
<h1 id="七、图书类别查询功能"><a href="#七、图书类别查询功能" class="headerlink" title="七、图书类别查询功能"></a>七、图书类别查询功能</h1><h2 id="1-在Dao层添加查询方法"><a href="#1-在Dao层添加查询方法" class="headerlink" title="1.在Dao层添加查询方法"></a>1.在Dao层添加查询方法</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab0fd1097.png" alt="image-20230215152505106"></p>
<p>该方法的输入参数是一个Connection对象和一个BookType对象。Connection对象用于连接数据库，BookType对象用于表示查询条件，其中可以包含书籍类型名称等属性。</p>
<p>该方法首先创建一个StringBuffer对象，将SQL语句”select * from t_bookType”添加到缓冲区中。如果BookType对象的书籍类型名称不为空，则将其添加到SQL语句的末尾，以便使用LIKE子句执行模糊匹配。</p>
<p>然后，该方法创建一个PreparedStatement对象，将SQL语句作为参数传递给它。在此过程中，方法使用replaceFirst方法将SQL语句中的第一个AND关键字替换为WHERE关键字。</p>
<p>最后，该方法执行查询并返回一个ResultSet对象，该对象包含查询结果。调用者可以使用ResultSet对象的方法来遍历查询结果并获取所需的数据。</p>
<h2 id="2-创建查询JInterna-Frame界面"><a href="#2-创建查询JInterna-Frame界面" class="headerlink" title="2.创建查询JInterna|Frame界面"></a>2.创建查询JInterna|Frame界面</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab1113d4d.png" alt="image-20230215152838222"></p>
<p>把最小化和关闭打开</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab1113d4d.png" alt="image-20230215153039849"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab118ec02.png" alt="image-20230215153219732"></p>
<p>接着添加各种组件</p>
<p>添加JScrollPane</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab11c6f55.png" alt="image-20230215153426501"></p>
<p>在ScrollPane添加JTable</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab1269381.png" alt="image-20230215153758797"></p>
<p>接着设置模型</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab136d02d.png" alt="image-20230215153857236"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab13891ca.png" alt="image-20230215154128944"></p>
<p>把不可编辑打开</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab13c07b2.png" alt="image-20230215154340939"></p>
<h2 id="3-与数据库连接"><a href="#3-与数据库连接" class="headerlink" title="3.与数据库连接"></a>3.与数据库连接</h2><h3 id="①写一个方法用来独立封装数据"><a href="#①写一个方法用来独立封装数据" class="headerlink" title="①写一个方法用来独立封装数据"></a>①写一个方法用来独立封装数据</h3><p>把table的名字改成bookTypeTable</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab144122c.png" alt="image-20230215154818110"></p>
<p>初始化表格</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab1489044.png" alt="image-20230215160118406"></p>
<h3 id="②在Mainfrm中添加事件"><a href="#②在Mainfrm中添加事件" class="headerlink" title="②在Mainfrm中添加事件"></a>②在Mainfrm中添加事件</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab1619547.png" alt="image-20230215160239810"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab162524e.png" alt="image-20230215160406574"></p>
<h2 id="4-根据输入的内容查询"><a href="#4-根据输入的内容查询" class="headerlink" title="4.根据输入的内容查询"></a>4.根据输入的内容查询</h2><h3 id="①创建窗口"><a href="#①创建窗口" class="headerlink" title="①创建窗口"></a>①创建窗口</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab17d16c7.png" alt="image-20230215163819822"></p>
<h3 id="②添加事件"><a href="#②添加事件" class="headerlink" title="②添加事件"></a>②添加事件</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab16eb6ff.png" alt="image-20230215164527764"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab166f347.png" alt="image-20230215164936252"></p>
<h2 id="5-遇到的问题-1"><a href="#5-遇到的问题-1" class="headerlink" title="5.遇到的问题"></a>5.遇到的问题</h2><h3 id="①在测试查询功能时又出现空指针问题，而且数据没有显示"><a href="#①在测试查询功能时又出现空指针问题，而且数据没有显示" class="headerlink" title="①在测试查询功能时又出现空指针问题，而且数据没有显示"></a>①在测试查询功能时又出现空指针问题，而且数据没有显示</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab175b401.png" alt="image-20230215160615652"></p>
<p>发现是我的sql语句中and写错</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab193653b.png" alt="image-20230215160807291"></p>
<p>运行过后还是出现空指针问题</p>
<p>最后在Connection con&#x3D;null；后面加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[bookType.setTypeName(&quot;&quot;);]()</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab197f468.png" alt="image-20230215162106967"></p>
<p>查询成功</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab19369ec.png" alt="image-20230215162139543"></p>
<p>根据网上查找的资料看bookType.setTypeName(“”);的作用是</p>
<p>通过调用<code>bookType.setTypeName(&quot;&quot;)</code>将<code>bookType</code>对象的<code>typeName</code>属性设置为空字符串，这样做的目的是为了在查询<code>bookType</code>对象时不需要指定<code>bookTypeName</code>属性的值</p>
<p>在<code>bookTypeDao.list()</code>方法中，如果传入的<code>BookType</code>对象的<code>bookTypeName</code>属性值为空字符串或null，则不会将<code>bookTypeName</code>作为查询条件，即查询所有的书籍类型。因此在这个方法中，设置<code>bookType</code>对象的<code>bookTypeName</code>属性为空字符串是为了查询所有的书籍类型，并将它们添加到表格中。</p>
<p>如果不设置<code>bookType</code>对象的<code>bookTypeName</code>属性为空字符串，则可能只能查询到指定书籍类型的记录，而无法查询到所有的书籍类型</p>
<h3 id="②在搜索过成又出现查询不到"><a href="#②在搜索过成又出现查询不到" class="headerlink" title="②在搜索过成又出现查询不到"></a>②在搜索过成又出现查询不到</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab19e4e0a.png" alt="image-20230215170031282"></p>
<p>优化了一下BookTypeDao中的查询图书类别集合代码</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab1a2cc22.png" alt="image-20230215170117811"></p>
<p>原先使用的代码如果<code>bookType.getBookTypeName()</code>返回空字符串，那么SQL语句中会出现<code>and</code>关键字，导致语法错误。需要在拼接SQL语句时，先判断是否有查询条件，如果没有则不需要添加<code>and</code>关键字。</p>
<p>经过测试又出现SSL连接警告</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab1a2cb02.png" alt="image-20230215170416152"></p>
<p>接着我在数据库连接时禁用了SSL 恢复了正常</p>
<p>?useSSL&#x3D;false </p>
<p><strong><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab1c97dd8.png" alt="image-20230215172552451"></strong></p>
<p>但是在运行BookTypeManageInterFrm还是出现错误错误信息如下</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab1c2d920.png" alt="image-20230215223640350"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">java.lang.NullPointerException</span><br><span class="line"></span><br><span class="line">​	at com.java1234.util.StringUtil.isNotEmpty(StringUtil.java:<span class="number">28</span>)</span><br><span class="line"></span><br><span class="line">​	at com.java1234.dao.BookTypeDao.list(BookTypeDao.java:<span class="number">48</span>)</span><br><span class="line"></span><br><span class="line">​	at com.java1234.view.BookTypeManageInterFrm.fillTable(BookTypeManageInterFrm.java:<span class="number">158</span>)</span><br><span class="line"></span><br><span class="line">​	at com.java1234.view.BookTypeManageInterFrm.&lt;init&gt;(BookTypeManageInterFrm.java:<span class="number">125</span>)</span><br><span class="line"></span><br><span class="line">​	at com.java1234.view.BookTypeManageInterFrm$<span class="number">1.</span>run(BookTypeManageInterFrm.java:<span class="number">41</span>)</span><br><span class="line"></span><br><span class="line">​	at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:<span class="number">311</span>)</span><br><span class="line"></span><br><span class="line">​	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:<span class="number">758</span>)</span><br><span class="line"></span><br><span class="line">​	at java.awt.EventQueue.access$<span class="number">500</span>(EventQueue.java:<span class="number">97</span>)</span><br><span class="line"></span><br><span class="line">​	at java.awt.EventQueue$<span class="number">3.</span>run(EventQueue.java:<span class="number">709</span>)</span><br><span class="line"></span><br><span class="line">​	at java.awt.EventQueue$<span class="number">3.</span>run(EventQueue.java:<span class="number">703</span>)</span><br><span class="line"></span><br><span class="line">​	at java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line"></span><br><span class="line">​	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:<span class="number">74</span>)</span><br><span class="line"></span><br><span class="line">​	at java.awt.EventQueue.dispatchEvent(EventQueue.java:<span class="number">728</span>)</span><br><span class="line"></span><br><span class="line">​	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:<span class="number">205</span>)</span><br><span class="line"></span><br><span class="line">​	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:<span class="number">116</span>)</span><br><span class="line"></span><br><span class="line">​	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:<span class="number">105</span>)</span><br><span class="line"></span><br><span class="line">​	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:<span class="number">101</span>)</span><br><span class="line"></span><br><span class="line">​	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:<span class="number">93</span>)</span><br><span class="line"></span><br><span class="line">​	at java.awt.EventDispatchThread.run(EventDispatchThread.java:<span class="number">82</span>)</span><br></pre></td></tr></table></figure>

<p>最后发现时赛String中isNotEmpty方法错误更正之后解决了问题</p>
<p>之前代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isNotEmpty</span><span class="params">(String str)</span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(str==<span class="literal">null</span> &amp;&amp; <span class="string">&quot;&quot;</span>.equals(str.trim())) &#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>更正之后</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isNotEmpty</span><span class="params">(String str)</span> &#123;</span><br><span class="line"></span><br><span class="line">​	     <span class="keyword">if</span> (str ==<span class="literal">null</span> || <span class="string">&quot;&quot;</span>.equals(str.trim())) &#123;</span><br><span class="line"></span><br><span class="line">​	        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">​	    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">​	        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">​	    &#125;</span><br><span class="line"></span><br><span class="line">​	&#125;</span><br></pre></td></tr></table></figure>

<p>之后终于可以查询</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab1bb2593.png" alt="image-20230215232413557"></p>
<p>还有一点 在输入完名称后不要急着按回车 不然按了回车键 再点了查询会搜索不到，具体原因我也不知道</p>
<h1 id="八、图书类别修改功能"><a href="#八、图书类别修改功能" class="headerlink" title="八、图书类别修改功能"></a>八、图书类别修改功能</h1><h2 id="1-首先写dao层"><a href="#1-首先写dao层" class="headerlink" title="1.首先写dao层"></a>1.首先写dao层</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab1c9eefa.png" alt="image-20230215233820132"></p>
<h2 id="2-view层"><a href="#2-view层" class="headerlink" title="2.view层"></a>2.view层</h2><p>接着还是使用插件</p>
<p>使用JPanel面板</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab1cae56a.png" alt="image-20230216134713953"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab1ccf6c1.png" alt="image-20230216135726099"></p>
<h2 id="3重命名组件"><a href="#3重命名组件" class="headerlink" title="3重命名组件"></a>3重命名组件</h2><p>分别给编号 图书类别名称 和描述重命名</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab1d972ac.png" alt="image-20230216140053365"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab1e8ed35.png" alt="image-20230216140107320"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab1f2563b.png" alt="image-20230216140118920"></p>
<h2 id="4-表格行点击事件处理事件"><a href="#4-表格行点击事件处理事件" class="headerlink" title="4.表格行点击事件处理事件"></a>4.表格行点击事件处理事件</h2><p>给表创建mousePressed事件，用于表格行点击事件处理</p>
<p>mousePressed是一个计算机编程中的事件，通常用于图形用户界面（GUI）编程中。这个事件会在鼠标按下的时候触发，程序可以响应该事件并执行相应的代码。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab1fd7873.png" alt="image-20230216140709923"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">bookTypeTableMousePressed</span><span class="params">(MouseEvent evt)</span> &#123;</span><br><span class="line">		<span class="type">int</span> row=bookTypeTable.getSelectedRow();</span><br><span class="line">		idTxt.setText((String)bookTypeTable.getValueAt(row, <span class="number">0</span>));</span><br><span class="line">		bookTypeNameTxt.setText((String)bookTypeTable.getValueAt(row, <span class="number">1</span>));</span><br><span class="line">		bookTypeDescTxt.setText((String)bookTypeTable.getValueAt(row, <span class="number">2</span>));</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab209b8fb.png" alt="image-20230216141843607"></p>
<p>测试成功</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab1f90eb5.png" alt="image-20230216141923726"></p>
<h2 id="5-修改事件"><a href="#5-修改事件" class="headerlink" title="5.修改事件"></a>5.修改事件</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab2107adc.png" alt="image-20230216142117812"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab21ce28e.png" alt="image-20230216144755749"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">bookTypeUpdateActionEvent</span><span class="params">(ActionEvent evt)</span> &#123;</span><br><span class="line">		String id=idTxt.getText();</span><br><span class="line">		String bookTypeName=bookTypeNameTxt.getText();</span><br><span class="line">		String bookTypeDesc=bookTypeDescTxt.getText();</span><br><span class="line">	<span class="keyword">if</span>(StringUtil.isEmpty(id)) &#123;</span><br><span class="line">			JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;请选择要修改的记录&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">    <span class="keyword">if</span>(StringUtil.isEmpty(bookTypeName)) &#123;</span><br><span class="line">			JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;图书类别不能为空&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="type">BookType</span> <span class="variable">bookType</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BookType</span>(Integer.parseInt(id),bookTypeName,bookTypeDesc);</span><br><span class="line">		Connection con=<span class="literal">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			con=dbUtil.getCon();</span><br><span class="line">			<span class="type">int</span> modifyNum=bookTypeDao.update(con, bookType);</span><br><span class="line">			<span class="keyword">if</span>(modifyNum==<span class="number">1</span>) &#123;</span><br><span class="line">				JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;修改成功！&quot;</span>);</span><br><span class="line">				<span class="built_in">this</span>.resetValue();</span><br><span class="line">				<span class="built_in">this</span>.fillTable(<span class="keyword">new</span> <span class="title class_">BookType</span>());</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">				JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;修改失败！&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				dbUtil.closeCon(con);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">				<span class="comment">// TODO 自动生成的 catch 块</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 重置表单</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">resetValue</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.idTxt.setText(<span class="string">&quot; &quot;</span>);</span><br><span class="line">		<span class="built_in">this</span>.bookTypeNameTxt.setText(<span class="string">&quot; &quot;</span>);</span><br><span class="line">		<span class="built_in">this</span>.bookTypeDescTxt.setText(<span class="string">&quot; &quot;</span>);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>测试一下</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab21cd6ab.png" alt="image-20230216143956203"></p>
<h2 id="6-遇到的问题"><a href="#6-遇到的问题" class="headerlink" title="6.遇到的问题"></a>6.遇到的问题</h2><p>点击修改时发现错误</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab22ae970.png" alt="image-20230216144152298"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version <span class="keyword">for</span> the right syntax to use near <span class="string">&#x27;where bookTypeName=&#x27;</span>科学类图书<span class="string">&#x27;,bookTypeDesc=&#x27;</span>这是一本关于科学类<span class="string">&#x27; at line 1</span></span><br></pre></td></tr></table></figure>

<p>结果发现是BookTypeDao层中的update的方法中sql语句写错</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab22b29c6.png" alt="image-20230216144320363"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(Connection con,BookType bookType)</span><span class="keyword">throws</span> Exception&#123;</span><br><span class="line">		String sql=<span class="string">&quot;update t_bookType set bookTypeName=?,bookTypeDesc=? where id=?&quot;</span>;</span><br><span class="line">		PreparedStatement pstmt=con.prepareStatement(sql);</span><br><span class="line">		pstmt.setString(<span class="number">1</span>, bookType.getBookTypeName());</span><br><span class="line">		pstmt.setString(<span class="number">2</span>, bookType.getBookTypeDese());</span><br><span class="line">		pstmt.setInt(<span class="number">3</span>, bookType.getId());</span><br><span class="line">		<span class="keyword">return</span> pstmt.executeUpdate();</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab2322483.png" alt="image-20230216144443271"></p>
<p>修改成功</p>
<h1 id="九、图书类别删除功能"><a href="#九、图书类别删除功能" class="headerlink" title="九、图书类别删除功能"></a>九、图书类别删除功能</h1><h2 id="1-图书类别删除事件处理"><a href="#1-图书类别删除事件处理" class="headerlink" title="1.图书类别删除事件处理"></a>1.图书类别删除事件处理</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab2417051.png" alt="image-20230216145005612"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 图书类别删除事件处理</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> e</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">bookTypeDeleteActionEvent</span><span class="params">(ActionEvent evt)</span> &#123;</span><br><span class="line">		String id=idTxt.getText();</span><br><span class="line">		<span class="keyword">if</span>(StringUtil.isEmpty(id)) &#123;</span><br><span class="line">			JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;请选择要删除的记录&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="type">int</span> n=JOptionPane.showConfirmDialog(<span class="literal">null</span>, <span class="string">&quot;确定要删除该记录吗？&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(n==<span class="number">0</span>) &#123;</span><br><span class="line">			Connection con=<span class="literal">null</span>;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				con=dbUtil.getCon();</span><br><span class="line">				<span class="type">int</span> deleteNum=bookTypeDao.delete(con, id);</span><br><span class="line">				<span class="keyword">if</span>(deleteNum==<span class="number">1</span>) &#123;</span><br><span class="line">					JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;删除成功&quot;</span>);</span><br><span class="line">					<span class="built_in">this</span>.resetValue();</span><br><span class="line">					<span class="built_in">this</span>.fillTable(<span class="keyword">new</span> <span class="title class_">BookType</span>());</span><br><span class="line">				&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">					JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;删除失败&quot;</span>);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;<span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					dbUtil.closeCon(con);</span><br><span class="line">				&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">					<span class="comment">// TODO 自动生成的 catch 块</span></span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab24af809.png" alt="image-20230216150035891"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab24161d9.png" alt="image-20230216150108421"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab24c4a71.png" alt="image-20230216150244721"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab24e9b74.png" alt="image-20230216150303378"></p>
<h1 id="十、图书添加功能"><a href="#十、图书添加功能" class="headerlink" title="十、图书添加功能"></a>十、图书添加功能</h1><h2 id="1-为图书添加创建数据库"><a href="#1-为图书添加创建数据库" class="headerlink" title="1.为图书添加创建数据库"></a>1.为图书添加创建数据库</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab2557a4b.png" alt="image-20230216214349847"></p>
<h2 id="2-新建架构设计"><a href="#2-新建架构设计" class="headerlink" title="2.新建架构设计"></a>2.新建架构设计</h2><p>由于之前我的Navicat11版本没有激活所以没有架构设计这一功能 ，现在换成了Navicat16版本</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab25f416b.png" alt="image-20230216223543600"></p>
<p>t_book的bookTypeId 与t_booktype的id 外键相连</p>
<h2 id="3-创建实体model"><a href="#3-创建实体model" class="headerlink" title="3.创建实体model"></a>3.创建实体model</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab264e750.png" alt="image-20230216225534725"></p>
<h2 id="4-创建Book-dao层"><a href="#4-创建Book-dao层" class="headerlink" title="4.创建Book dao层"></a>4.创建Book dao层</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab26b7bec.png" alt="image-20230216230637310"></p>
<h2 id="5-创建view层"><a href="#5-创建view层" class="headerlink" title="5.创建view层"></a>5.创建view层</h2><p>分别添加组件以及txt窗口</p>
<p>作者性别男女的RadioButton只能选中一个</p>
<p>所以把他们分别存一个组里</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab26c9ddd.png" alt="image-20230217143059948"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab26f38a4.png" alt="image-20230217143141250"></p>
<p>界面设计完成</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab275e90e.png" alt="image-20230217145032593"></p>
<h2 id="6-与之前的主界面关联"><a href="#6-与之前的主界面关联" class="headerlink" title="6.与之前的主界面关联"></a>6.与之前的主界面关联</h2><p>添加事件</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab27d61fe.png" alt="image-20230217145553400"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab287bfad.png" alt="image-20230217145717449"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">JMenuItem</span> <span class="variable">mntmNewMenuItem_3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JMenuItem</span>(<span class="string">&quot;图书添加&quot;</span>);</span><br><span class="line">		mntmNewMenuItem_3.addActionListener(<span class="keyword">new</span> <span class="title class_">ActionListener</span>() &#123;</span><br><span class="line">			<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">actionPerformed</span><span class="params">(ActionEvent e)</span> &#123;</span><br><span class="line">				BookAddInterFrm bookAddInterFrm=<span class="keyword">new</span> <span class="title class_">BookAddInterFrm</span>();</span><br><span class="line">				bookAddInterFrm.setVisible(<span class="literal">true</span>);</span><br><span class="line">				table.add(bookAddInterFrm);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="7-图书类别下拉框"><a href="#7-图书类别下拉框" class="headerlink" title="7.图书类别下拉框"></a>7.图书类别下拉框</h2><h3 id="①在BookAddInterFrm中封装一个方法用于初始化图书类别下拉框"><a href="#①在BookAddInterFrm中封装一个方法用于初始化图书类别下拉框" class="headerlink" title="①在BookAddInterFrm中封装一个方法用于初始化图书类别下拉框"></a>①在BookAddInterFrm中封装一个方法用于初始化图书类别下拉框</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab2951d00.png" alt="image-20230217152038101"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 初始化图书类别下拉框</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">fillBookType</span><span class="params">()</span>&#123;</span><br><span class="line">		Connection con=<span class="literal">null</span>;</span><br><span class="line">		BookType bookType=<span class="literal">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			con=dbUtil.getCon();</span><br><span class="line">			ResultSet rs=bookTypeDao.list(con,<span class="keyword">new</span> <span class="title class_">BookType</span>());</span><br><span class="line">			<span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">				bookType=<span class="keyword">new</span> <span class="title class_">BookType</span>();</span><br><span class="line">				bookType.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">				bookType.setBookTypeName(rs.getString(<span class="string">&quot;bookTypeName&quot;</span>));</span><br><span class="line">				<span class="built_in">this</span>.bookTypeJcb.addItem(bookType);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>



<h3 id="②遇到的问题"><a href="#②遇到的问题" class="headerlink" title="②遇到的问题"></a>②遇到的问题</h3><p>结果测试发现没有正确显示</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab29037e6.png" alt="image-20230217152140636"></p>
<p>要重写BookType中的方法</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab29c46ef.png" alt="image-20230217152416138"></p>
<p>测试成功</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab2998f51.png" alt="image-20230217152459854"></p>
<h2 id="8-图书添加事件处理"><a href="#8-图书添加事件处理" class="headerlink" title="8.图书添加事件处理"></a>8.图书添加事件处理</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab2a8d0d7.png" alt="image-20230217152900727"></p>
<p>分别在book中生成构造函数</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab2c6f03f.png" alt="image-20230217154245667"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 图书添加事件处理</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> e</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">bookAddActionPerformed</span><span class="params">(ActionEvent evt)</span> &#123;</span><br><span class="line">		String bookName=<span class="built_in">this</span>.bookNameTxt.getText();</span><br><span class="line">		String author=<span class="built_in">this</span>.authorTxt.getText();</span><br><span class="line">		String price=<span class="built_in">this</span>.priceTxt.getText();</span><br><span class="line">		String bookDesc=<span class="built_in">this</span> .bookDescTxt.getText();</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span>(StringUtil.isEmpty(bookName)) &#123;</span><br><span class="line">			JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;图书名称不能为空！&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(StringUtil.isEmpty(author)) &#123;</span><br><span class="line">			JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;图书作者不能为空！&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(StringUtil.isEmpty(price)) &#123;</span><br><span class="line">			JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;图书价格不能为空！&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		String sex=<span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">if</span>(manJrb.isSelected()) &#123;</span><br><span class="line">			sex=<span class="string">&quot;男&quot;</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span>(femaleJrb.isSelected()) &#123;</span><br><span class="line">			sex=<span class="string">&quot;女&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		BookType bookType=(BookType) bookTypeJcb.getSelectedItem();</span><br><span class="line">		<span class="type">int</span> bookTypeId=bookType.getId();</span><br><span class="line">		</span><br><span class="line">		Book book=<span class="keyword">new</span> <span class="title class_">Book</span>(bookName, author, sex, Float.parseFloat(price), bookTypeId,bookDesc);</span><br><span class="line">		</span><br><span class="line">		<span class="type">Connection</span> <span class="variable">con</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			con=dbUtil.getCon();</span><br><span class="line">			<span class="type">int</span> addNum=bookDao.add(con, book);</span><br><span class="line">			<span class="keyword">if</span>(addNum==<span class="number">1</span>) &#123;</span><br><span class="line">				JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;图书添加成功！&quot;</span>);</span><br><span class="line">				resetValue();</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">				JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;图书添加失败！&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;图书添加失败！&quot;</span>);</span><br><span class="line">		&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				dbUtil.closeCon(con);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">				<span class="comment">// TODO 自动生成的 catch 块</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 重置表单</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">resetValue</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.bookNameTxt.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">		<span class="built_in">this</span>.authorTxt.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">		<span class="built_in">this</span>.priceTxt.setText(<span class="string">&quot;&quot;</span>) ;</span><br><span class="line">		<span class="built_in">this</span>.manJrb.setSelected(<span class="literal">true</span>);</span><br><span class="line">		<span class="built_in">this</span>,bookDescTxt.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">this</span>.bookTypeJcb.getItemCount()&gt;<span class="number">0</span>) &#123;</span><br><span class="line">			<span class="built_in">this</span>.bookTypeJcb.setSelectedIndex(<span class="number">0</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 重置表单</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">resetValue</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.bookNameTxt.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">		<span class="built_in">this</span>.authorTxt.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">		<span class="built_in">this</span>.priceTxt.setText(<span class="string">&quot;&quot;</span>) ;</span><br><span class="line">		<span class="built_in">this</span>.manJrb.setSelected(<span class="literal">true</span>);</span><br><span class="line">		<span class="built_in">this</span>,bookDescTxt.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">this</span>.bookTypeJcb.getItemCount()&gt;<span class="number">0</span>) &#123;</span><br><span class="line">			<span class="built_in">this</span>.bookTypeJcb.setSelectedIndex(<span class="number">0</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>这段代码 <code>this.bookTypeJcb.getItemCount() &gt; 0</code> 的意思是检查下拉框 <code>bookTypeJcb</code> 中是否有选项。</p>
<p><code>getItemCount()</code> 是一个方法，用于获取下拉框中的选项数。如果返回的值大于 0，说明下拉框中至少有一个选项，此时可以使用 <code>setSelectedIndex(0)</code> 方法将第一个选项设为默认选中状态。</p>
<p>因此，这段代码的作用是在重置表单值时，如果下拉框中有选项，则将第一个选项设为默认选中状态。如果下拉框中没有选项，这段代码不会执行任何操作。</p>
<h2 id="9-图书重置事件处理"><a href="#9-图书重置事件处理" class="headerlink" title="9.图书重置事件处理"></a>9.图书重置事件处理</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab3b83400.png" alt="image-20230217155656442"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab2f1dbed.png" alt="image-20230217155854743"></p>
<h3 id="①测试一下"><a href="#①测试一下" class="headerlink" title="①测试一下"></a>①测试一下</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab2c36944.png" alt="image-20230217155942246"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab2ebeae4.png" alt="image-20230217160003858"></p>
<h3 id="②遇到的问题-1"><a href="#②遇到的问题-1" class="headerlink" title="②遇到的问题"></a>②遇到的问题</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab2faf8d3.png" alt="image-20230217160144311"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab301c6bf.png" alt="image-20230217160219570"></p>
<p>这个错误信息表示在执行 SQL 查询时存在语法错误。消息建议检查 MySQL 服务器版本以确定使用正确的语法。该错误发生在 <code>BookDao</code> 类的 <code>add</code> 方法的第 29 行。堆栈跟踪还显示，该错误是在 <code>BookAddInterFrm</code> 类的第 273 行调用 <code>bookAddActionPerformed</code> 方法触发的。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab2fec786.png" alt="image-20230217160926431"></p>
<p>经过发现是我的表名写错了</p>
<p>在测试一下</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab312d0d5.png" alt="image-20230217161102059"></p>
<p>在看一下数据库的信息</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab332e84e.png" alt="image-20230217161137749"></p>
<p>成功添加</p>
<h1 id="十一、图书查询功能"><a href="#十一、图书查询功能" class="headerlink" title="十一、图书查询功能"></a>十一、图书查询功能</h1><h2 id="1-图书查询功能实现"><a href="#1-图书查询功能实现" class="headerlink" title="1.图书查询功能实现"></a>1.图书查询功能实现</h2><p>dao层实现 图书信息查询</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab32aa73c.png" alt="image-20230218125123855"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 图书信息查询</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> con</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> book</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> ResultSet <span class="title function_">list</span><span class="params">(Connection con,Book book)</span><span class="keyword">throws</span> Exception &#123;</span><br><span class="line">		StringBuffer sb= <span class="keyword">new</span> <span class="title class_">StringBuffer</span>(<span class="string">&quot;select * from t_book b,t_bookType bt where b.bookTypeId=bt.id&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(StringUtil.isEmpty(book.getBookName())) &#123;</span><br><span class="line">			sb.append(<span class="string">&quot; and b.bookName like &#x27;%&quot;</span>+book.getBookName()+<span class="string">&quot;%&#x27;&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(StringUtil.isEmpty(book.getAuthor())) &#123;</span><br><span class="line">			sb.append(<span class="string">&quot; and b.author like &#x27;%&quot;</span>+book.getAuthor()+<span class="string">&quot;%&#x27;&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(book.getBookTypeId()!=<span class="literal">null</span> &amp;&amp; book.getBookTypeId()!=-<span class="number">1</span>) &#123;</span><br><span class="line">			sb.append(<span class="string">&quot; and b.bookTypeId&quot;</span>+book.getBookTypeId());</span><br><span class="line">		&#125;</span><br><span class="line">		PreparedStatement pstmt=con.prepareStatement(sb.toString().replaceFirst(<span class="string">&quot;and&quot;</span>, <span class="string">&quot;where&quot;</span>));</span><br><span class="line">		<span class="keyword">return</span> pstmt.executeQuery();</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>



<h2 id="2-实现内部窗体"><a href="#2-实现内部窗体" class="headerlink" title="2.实现内部窗体"></a>2.实现内部窗体</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab32cd2ac.png" alt="image-20230218125616380"></p>
<p>添加scroIIIPane 与 table 接着再 table中添加model</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab341e0f0.png" alt="image-20230218130408537"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab3565b0c.png" alt="image-20230218130807494"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab35e42c2.png" alt="image-20230218131903594"></p>
<h2 id="3-代码实现下拉菜单"><a href="#3-代码实现下拉菜单" class="headerlink" title="3.代码实现下拉菜单"></a>3.代码实现下拉菜单</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 初始化下拉框</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> type 下拉框类型</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">fillBookType</span><span class="params">(String type)</span> &#123;</span><br><span class="line">		Connection con=<span class="literal">null</span>;</span><br><span class="line">		BookType bookType=<span class="literal">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			con=dbUtil.getCon();</span><br><span class="line">			ResultSet rs=bookTypeDao.list(con, <span class="keyword">new</span> <span class="title class_">BookType</span>());</span><br><span class="line">			<span class="keyword">if</span>(<span class="string">&quot;search&quot;</span>.equals(type)) &#123;</span><br><span class="line">				bookType =<span class="keyword">new</span> <span class="title class_">BookType</span>();</span><br><span class="line">				bookType.setBookTypeName(<span class="string">&quot;请选择...&quot;</span>);</span><br><span class="line">				bookType.setId(-<span class="number">1</span>);</span><br><span class="line">				<span class="built_in">this</span>.s_bookTypeJcb.addItem(bookType);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">while</span>(rs.next()) &#123;</span><br><span class="line">				bookType =<span class="keyword">new</span> <span class="title class_">BookType</span>();</span><br><span class="line">				bookType.setBookTypeName(rs.getString(<span class="string">&quot;bookTypeName&quot;</span>));</span><br><span class="line">				bookType.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">				<span class="keyword">if</span>(<span class="string">&quot;search&quot;</span>.equals(type)) &#123;</span><br><span class="line">					<span class="built_in">this</span>.s_bookTypeJcb.addItem(bookType);</span><br><span class="line">				&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;modify&quot;</span>.equals(type)) &#123;</span><br><span class="line">					</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				dbUtil.closeCon(con);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">				<span class="comment">// TODO 自动生成的 catch 块</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>与前面主界面进行连接</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab36bbbde.png" alt="image-20230218133406666"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab3b868f0.png" alt="image-20230218133518148"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">JMenuItem</span> <span class="variable">mntmNewMenuItem_4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JMenuItem</span>(<span class="string">&quot;图书维护&quot;</span>);</span><br><span class="line">		mntmNewMenuItem_4.addActionListener(<span class="keyword">new</span> <span class="title class_">ActionListener</span>() &#123;</span><br><span class="line">			<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">actionPerformed</span><span class="params">(ActionEvent e)</span> &#123;</span><br><span class="line">				BookManageInterFrm bookManageInterFrm=<span class="keyword">new</span> <span class="title class_">BookManageInterFrm</span>();</span><br><span class="line">				bookManageInterFrm.setVisible(<span class="literal">true</span>);</span><br><span class="line">				table.add(bookManageInterFrm);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab36867c1.png" alt="image-20230218134446361"></p>
<h2 id="4-初始化表格数据"><a href="#4-初始化表格数据" class="headerlink" title="4.初始化表格数据"></a>4.初始化表格数据</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 初始化表格数据</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> book</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">fillTable</span><span class="params">(Book book)</span> &#123;</span><br><span class="line">		DefaultTableModel dtm=(DefaultTableModel)bookTable.getModel();</span><br><span class="line">		dtm.setRowCount(<span class="number">0</span>);<span class="comment">//设置成0行</span></span><br><span class="line">		Connection con=<span class="literal">null</span>;</span><br><span class="line">		<span class="comment">//bookType.setBookTypeName(&quot;&quot;);</span></span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			con=dbUtil.getCon();</span><br><span class="line">			ResultSet rs=bookDao.list(con, book);</span><br><span class="line">			<span class="keyword">while</span>(rs.next()) &#123;</span><br><span class="line">				Vector v=<span class="keyword">new</span> <span class="title class_">Vector</span>();</span><br><span class="line">				v.add(rs.getString(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">				v.add(rs.getString(<span class="string">&quot;bookName&quot;</span>));</span><br><span class="line">				v.add(rs.getString(<span class="string">&quot;author&quot;</span>));</span><br><span class="line">				v.add(rs.getString(<span class="string">&quot;sex&quot;</span>));</span><br><span class="line">				v.add(rs.getFloat(<span class="string">&quot;price&quot;</span>));</span><br><span class="line">				v.add(rs.getString(<span class="string">&quot;bookDesc&quot;</span>));</span><br><span class="line">				v.add(rs.getString(<span class="string">&quot;bookTypeName&quot;</span>));</span><br><span class="line">				dtm.addRow(v);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				dbUtil.closeCon(con);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">				<span class="comment">// TODO 自动生成的 catch 块</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>



<h2 id="5-图书查询事件处理"><a href="#5-图书查询事件处理" class="headerlink" title="5.图书查询事件处理"></a>5.图书查询事件处理</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 图书查询事件处理</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> e</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">bookSearchActionPerformed</span><span class="params">(ActionEvent evt)</span> &#123;</span><br><span class="line">		String bookName=<span class="built_in">this</span>.s_bookNameTxt.getText();	</span><br><span class="line">		String author=<span class="built_in">this</span>.s_authorTxt.getText();</span><br><span class="line">		BookType bookType=(BookType) <span class="built_in">this</span>.s_bookTypeJcb.getSelectedItem();</span><br><span class="line">		<span class="type">int</span> bookTypeId=bookType.getId();</span><br><span class="line">		</span><br><span class="line">		<span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">Book</span>(bookName,author,bookTypeId);</span><br><span class="line">		<span class="built_in">this</span>.fillTable(book);</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab383a527.png" alt="image-20230218141922695"></p>
<h2 id="6-出现的问题"><a href="#6-出现的问题" class="headerlink" title="6.出现的问题"></a>6.出现的问题</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version <span class="keyword">for</span> the right syntax to use near <span class="string">&#x27;where b.bookName like &#x27;</span>%<span class="literal">null</span>%<span class="string">&#x27; and b.author like &#x27;</span>%<span class="literal">null</span>%<span class="string">&#x27;&#x27;</span> at line <span class="number">1</span></span><br><span class="line">	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)</span><br><span class="line">	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:<span class="number">62</span>)</span><br><span class="line">	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:<span class="number">45</span>)</span><br><span class="line">	at java.lang.reflect.Constructor.newInstance(Constructor.java:<span class="number">423</span>)</span><br><span class="line">	at com.mysql.jdbc.Util.handleNewInstance(Util.java:<span class="number">425</span>)</span><br><span class="line">	at com.mysql.jdbc.Util.getInstance(Util.java:<span class="number">408</span>)</span><br><span class="line">	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:<span class="number">944</span>)</span><br><span class="line">	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:<span class="number">3933</span>)</span><br><span class="line">	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:<span class="number">3869</span>)</span><br><span class="line">	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:<span class="number">2524</span>)</span><br><span class="line">	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:<span class="number">2675</span>)</span><br><span class="line">	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:<span class="number">2465</span>)</span><br><span class="line">	at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:<span class="number">1912</span>)</span><br><span class="line">	at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:<span class="number">2020</span>)</span><br><span class="line">	at com.java1234.dao.BookDao.list(BookDao.java:<span class="number">56</span>)</span><br><span class="line">	at com.java1234.view.BookManageInterFrm.fillTable(BookManageInterFrm.java:<span class="number">238</span>)</span><br><span class="line">	at com.java1234.view.BookManageInterFrm.&lt;init&gt;(BookManageInterFrm.java:<span class="number">187</span>)</span><br><span class="line">	at com.java1234.view.Mainfrm$<span class="number">5.</span>actionPerformed(Mainfrm.java:<span class="number">101</span>)</span><br><span class="line">	at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:<span class="number">2022</span>)</span><br><span class="line">	at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:<span class="number">2348</span>)</span><br><span class="line">	at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:<span class="number">402</span>)</span><br><span class="line">	at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:<span class="number">259</span>)</span><br><span class="line">	at javax.swing.AbstractButton.doClick(AbstractButton.java:<span class="number">376</span>)</span><br><span class="line">	at javax.swing.plaf.basic.BasicMenuItemUI.doClick(BasicMenuItemUI.java:<span class="number">882</span>)</span><br><span class="line">	at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(BasicMenuItemUI.java:<span class="number">926</span>)</span><br><span class="line">	at java.awt.Component.processMouseEvent(Component.java:<span class="number">6539</span>)</span><br><span class="line">	at javax.swing.JComponent.processMouseEvent(JComponent.java:<span class="number">3318</span>)</span><br><span class="line">	at java.awt.Component.processEvent(Component.java:<span class="number">6304</span>)</span><br><span class="line">	at java.awt.Container.processEvent(Container.java:<span class="number">2239</span>)</span><br><span class="line">	at java.awt.Component.dispatchEventImpl(Component.java:<span class="number">4889</span>)</span><br><span class="line">	at java.awt.Container.dispatchEventImpl(Container.java:<span class="number">2297</span>)</span><br><span class="line">	at java.awt.Component.dispatchEvent(Component.java:<span class="number">4711</span>)</span><br><span class="line">	at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:<span class="number">4904</span>)</span><br><span class="line">	at java.awt.LightweightDispatcher.processMouseEvent(Container.java:<span class="number">4535</span>)</span><br><span class="line">	at java.awt.LightweightDispatcher.dispatchEvent(Container.java:<span class="number">4476</span>)</span><br><span class="line">	at java.awt.Container.dispatchEventImpl(Container.java:<span class="number">2283</span>)</span><br><span class="line">	at java.awt.Window.dispatchEventImpl(Window.java:<span class="number">2746</span>)</span><br><span class="line">	at java.awt.Component.dispatchEvent(Component.java:<span class="number">4711</span>)</span><br><span class="line">	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:<span class="number">760</span>)</span><br><span class="line">	at java.awt.EventQueue.access$<span class="number">500</span>(EventQueue.java:<span class="number">97</span>)</span><br><span class="line">	at java.awt.EventQueue$<span class="number">3.</span>run(EventQueue.java:<span class="number">709</span>)</span><br><span class="line">	at java.awt.EventQueue$<span class="number">3.</span>run(EventQueue.java:<span class="number">703</span>)</span><br><span class="line">	at java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:<span class="number">74</span>)</span><br><span class="line">	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:<span class="number">84</span>)</span><br><span class="line">	at java.awt.EventQueue$<span class="number">4.</span>run(EventQueue.java:<span class="number">733</span>)</span><br><span class="line">	at java.awt.EventQueue$<span class="number">4.</span>run(EventQueue.java:<span class="number">731</span>)</span><br><span class="line">	at java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:<span class="number">74</span>)</span><br><span class="line">	at java.awt.EventQueue.dispatchEvent(EventQueue.java:<span class="number">730</span>)</span><br><span class="line">	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:<span class="number">205</span>)</span><br><span class="line">	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:<span class="number">116</span>)</span><br><span class="line">	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:<span class="number">105</span>)</span><br><span class="line">	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:<span class="number">101</span>)</span><br><span class="line">	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:<span class="number">93</span>)</span><br><span class="line">	at java.awt.EventDispatchThread.run(EventDispatchThread.java:<span class="number">82</span>)</span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab39dd642.png" alt="image-20230218135718726"></p>
<p>错误信息出现在了sql语法上的错误 </p>
<p>原来的sql语句</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ResultSet <span class="title function_">list</span><span class="params">(Connection con,Book book)</span><span class="keyword">throws</span> Exception &#123;</span><br><span class="line">		StringBuffer sb= <span class="keyword">new</span> <span class="title class_">StringBuffer</span>(<span class="string">&quot;select * from t_book b,t_bookType bt where b.bookTypeId=bt.id&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(StringUtil.isEmpty(book.getBookName())) &#123;</span><br><span class="line">			sb.append(<span class="string">&quot; and b.bookName like &#x27;%&quot;</span>+book.getBookName()+<span class="string">&quot;%&#x27;&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(StringUtil.isEmpty(book.getAuthor())) &#123;</span><br><span class="line">			sb.append(<span class="string">&quot; and b.author like &#x27;%&quot;</span>+book.getAuthor()+<span class="string">&quot;%&#x27;&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(book.getBookTypeId()!=<span class="literal">null</span> &amp;&amp; book.getBookTypeId()!=-<span class="number">1</span>) &#123;</span><br><span class="line">			sb.append(<span class="string">&quot; and b.bookTypeId&quot;</span>+book.getBookTypeId());/		&#125;</span><br><span class="line">		PreparedStatement pstmt=con.prepareStatement(sb.toString().replaceFirst(<span class="string">&quot;and&quot;</span>, <span class="string">&quot;where&quot;</span>));</span><br><span class="line">		<span class="keyword">return</span> pstmt.executeQuery();</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>



<p>改进后的代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ResultSet <span class="title function_">list</span><span class="params">(Connection con, Book book)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">	    <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="string">&quot;SELECT * FROM t_book b JOIN t_bookType bt ON b.bookTypeId = bt.id&quot;</span>);</span><br><span class="line">	    List&lt;Object&gt; params = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(); <span class="comment">// 用于保存参数值的列表</span></span><br><span class="line"></span><br><span class="line">	    <span class="keyword">if</span> (book != <span class="literal">null</span>) &#123;</span><br><span class="line">	        <span class="keyword">if</span> (!StringUtil.isEmpty(book.getBookName())) &#123;</span><br><span class="line">	            sb.append(<span class="string">&quot; AND b.bookName LIKE ?&quot;</span>);</span><br><span class="line">	            params.add(<span class="string">&quot;%&quot;</span> + book.getBookName() + <span class="string">&quot;%&quot;</span>);</span><br><span class="line">	        &#125;</span><br><span class="line">	        <span class="keyword">if</span> (!StringUtil.isEmpty(book.getAuthor())) &#123;</span><br><span class="line">	            sb.append(<span class="string">&quot; AND b.author LIKE ?&quot;</span>);</span><br><span class="line">	            params.add(<span class="string">&quot;%&quot;</span> + book.getAuthor() + <span class="string">&quot;%&quot;</span>);</span><br><span class="line">	        &#125;</span><br><span class="line">	        <span class="keyword">if</span> (book.getBookTypeId() != <span class="literal">null</span> &amp;&amp; book.getBookTypeId() != -<span class="number">1</span>) &#123;</span><br><span class="line">	            sb.append(<span class="string">&quot; AND b.bookTypeId = ?&quot;</span>);</span><br><span class="line">	            params.add(book.getBookTypeId());</span><br><span class="line">	        &#125;</span><br><span class="line">	    &#125;</span><br><span class="line"></span><br><span class="line">	    <span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> con.prepareStatement(sb.toString());</span><br><span class="line">	    <span class="comment">// 设置参数值</span></span><br><span class="line">	    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; params.size(); i++) &#123;</span><br><span class="line">	        pstmt.setObject(i + <span class="number">1</span>, params.get(i));</span><br><span class="line">	    &#125;</span><br><span class="line">	    <span class="keyword">return</span> pstmt.executeQuery();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>当输入的参数book的某些属性值为null或空字符串时，原来的代码会把相应的查询条件拼接到SQL语句上，从而导致SQL语法错误。为了避免这个问题，我们需要先判断查询条件是否为空，再拼接到SQL语句上。</p>
<p>此外，为了防止SQL注入攻击，我们应该使用PreparedStatement的参数化查询方法，而不是直接把参数拼接到SQL语句中。</p>
<p>这个方法使用StringBuilder来构建SQL语句，把需要查询的表连接起来，然后根据查询条件拼接WHERE子句，并使用占位符<code>?</code>来代替参数值。同时，为了方便设置参数值，我们使用了一个列表来保存所有需要设置的参数值。最后，使用PreparedStatement的setObject()方法来设置参数值，并执行查询操作。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab392cfb9.png" alt="image-20230218140544378"></p>
<h1 id="十二、图书修改与删除功能"><a href="#十二、图书修改与删除功能" class="headerlink" title="十二、图书修改与删除功能"></a>十二、图书修改与删除功能</h1><h2 id="1-Dao层"><a href="#1-Dao层" class="headerlink" title="1.Dao层"></a>1.Dao层</h2><p>图书信息删除</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">delete</span><span class="params">(Connection con,String id)</span><span class="keyword">throws</span> Exception&#123;</span><br><span class="line">		String sql=<span class="string">&quot;delete from t_book where id=?&quot;</span>;</span><br><span class="line">		<span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span>con.prepareStatement(sql);</span><br><span class="line">		pstmt.setString(<span class="number">1</span>, id);</span><br><span class="line">		<span class="keyword">return</span> pstmt.executeUpdate();</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>图书信息修改</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(Connection con,Book book)</span><span class="keyword">throws</span> Exception&#123;</span><br><span class="line">		String sql=<span class="string">&quot;update t_book set bookName=?,author=?,sex=?,price=?,bookDesc=?,bookTypeId=? where id=?&quot;</span>;</span><br><span class="line">		<span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span>con.prepareStatement(sql);</span><br><span class="line">		pstmt.setString(<span class="number">1</span>, book.getBookName());</span><br><span class="line">		pstmt.setString(<span class="number">2</span>, book.getAuthor());</span><br><span class="line">		pstmt.setString(<span class="number">3</span>, book.getSex());</span><br><span class="line">		pstmt.setFloat(<span class="number">4</span>, book.getPrice());</span><br><span class="line">		pstmt.setString(<span class="number">5</span>, book.getBookDesc());</span><br><span class="line">		pstmt.setInt(<span class="number">6</span>, book.getBookTypeId());</span><br><span class="line">		pstmt.setInt(<span class="number">7</span>, book.getId());</span><br><span class="line">		<span class="keyword">return</span> pstmt.executeUpdate();</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-viem层"><a href="#2-viem层" class="headerlink" title="2.viem层"></a>2.viem层</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab39de2a5.png" alt="image-20230218190625073"></p>
<h2 id="3-表格行点击事件处理"><a href="#3-表格行点击事件处理" class="headerlink" title="3.表格行点击事件处理"></a>3.表格行点击事件处理</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab3be2e6f.png" alt="image-20230218192525575"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab3d78ed4.png" alt="image-20230218205815430"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">bookTableMousePressed</span><span class="params">(MouseEvent met)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">row</span> <span class="operator">=</span> <span class="built_in">this</span>.bookTable.getSelectedRow();</span><br><span class="line">    <span class="built_in">this</span>.idTxt.setText(String.valueOf(bookTable.getValueAt(row, <span class="number">0</span>)));</span><br><span class="line">    <span class="built_in">this</span>.bookNameTxt.setText(String.valueOf(bookTable.getValueAt(row, <span class="number">1</span>)));</span><br><span class="line">    <span class="built_in">this</span>.authorTxt.setText(String.valueOf(bookTable.getValueAt(row, <span class="number">2</span>)));</span><br><span class="line">    <span class="type">String</span> <span class="variable">sex</span> <span class="operator">=</span> String.valueOf(bookTable.getValueAt(row, <span class="number">3</span>));</span><br><span class="line">    <span class="keyword">switch</span> (sex) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;男&quot;</span>:</span><br><span class="line">            <span class="built_in">this</span>.manJrb.setSelected(<span class="literal">true</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;女&quot;</span>:</span><br><span class="line">            <span class="built_in">this</span>.femaleJrb.setSelected(<span class="literal">true</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.priceTxt.setText(String.valueOf(bookTable.getValueAt(row, <span class="number">4</span>)));</span><br><span class="line">    <span class="built_in">this</span>.bookDescTxt.setText(String.valueOf(bookTable.getValueAt(row, <span class="number">5</span>)));</span><br><span class="line">    <span class="type">String</span> <span class="variable">bookTypeName</span> <span class="operator">=</span> String.valueOf(bookTable.getValueAt(row, <span class="number">6</span>));</span><br><span class="line">    <span class="type">int</span> <span class="variable">itemCount</span> <span class="operator">=</span> bookTypeJcb.getItemCount();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; itemCount; i++) &#123;</span><br><span class="line">        <span class="type">BookType</span> <span class="variable">item</span> <span class="operator">=</span> (BookType) bookTypeJcb.getItemAt(i);</span><br><span class="line">        <span class="keyword">if</span> (item.getBookTypeName().equals(bookTypeName)) &#123;</span><br><span class="line">            bookTypeJcb.setSelectedIndex(i);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这段代码中的<code>bookTableMousePressed</code>方法是一个鼠标按下事件的处理方法，当用户在表格中选中某一行并按下鼠标时，该方法就会被调用。在该方法中，首先获取用户所选行的行号<code>row</code>，然后根据行号从表格中获取该行的各个数据值，并将这些数据值设置到对应的文本框、下拉框和单选按钮中。</p>
<p>具体来说，这段代码做了以下几件事情：</p>
<p>①获取用户所选行的行号<code>row</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">row</span> <span class="operator">=</span> <span class="built_in">this</span>.bookTable.getSelectedRow();</span><br></pre></td></tr></table></figure>

<p>②根据行号从表格中获取该行的各个数据值：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.idTxt.setText(String.valueOf(bookTable.getValueAt(row, <span class="number">0</span>)));</span><br><span class="line"><span class="built_in">this</span>.bookNameTxt.setText(String.valueOf(bookTable.getValueAt(row, <span class="number">1</span>)));</span><br><span class="line"><span class="built_in">this</span>.authorTxt.setText(String.valueOf(bookTable.getValueAt(row, <span class="number">2</span>)));</span><br><span class="line"><span class="type">String</span> <span class="variable">sex</span> <span class="operator">=</span> String.valueOf(bookTable.getValueAt(row, <span class="number">3</span>));</span><br><span class="line"><span class="built_in">this</span>.priceTxt.setText(String.valueOf(bookTable.getValueAt(row, <span class="number">4</span>)));</span><br><span class="line"><span class="built_in">this</span>.bookDescTxt.setText(String.valueOf(bookTable.getValueAt(row, <span class="number">5</span>)));</span><br><span class="line"><span class="type">String</span> <span class="variable">bookTypeName</span> <span class="operator">=</span> String.valueOf(bookTable.getValueAt(row, <span class="number">6</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>③将数据值设置到对应的文本框、下拉框和单选按钮中：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.idTxt.setText(String.valueOf(bookTable.getValueAt(row, <span class="number">0</span>)));</span><br><span class="line"><span class="built_in">this</span>.bookNameTxt.setText(String.valueOf(bookTable.getValueAt(row, <span class="number">1</span>)));</span><br><span class="line"><span class="built_in">this</span>.authorTxt.setText(String.valueOf(bookTable.getValueAt(row, <span class="number">2</span>)));</span><br><span class="line"><span class="type">String</span> <span class="variable">sex</span> <span class="operator">=</span> String.valueOf(bookTable.getValueAt(row, <span class="number">3</span>));</span><br><span class="line"><span class="keyword">switch</span> (sex) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;男&quot;</span>:</span><br><span class="line">        <span class="built_in">this</span>.manJrb.setSelected(<span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;女&quot;</span>:</span><br><span class="line">        <span class="built_in">this</span>.femaleJrb.setSelected(<span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">this</span>.priceTxt.setText(String.valueOf(bookTable.getValueAt(row, <span class="number">4</span>)));</span><br><span class="line"><span class="built_in">this</span>.bookDescTxt.setText(String.valueOf(bookTable.getValueAt(row, <span class="number">5</span>)));</span><br><span class="line"><span class="type">String</span> <span class="variable">bookTypeName</span> <span class="operator">=</span> String.valueOf(bookTable.getValueAt(row, <span class="number">6</span>));</span><br><span class="line"><span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="built_in">this</span>.bookTypeJcb.getItemCount();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    <span class="type">BookType</span> <span class="variable">item</span> <span class="operator">=</span> (BookType) <span class="built_in">this</span>.bookTypeJcb.getItemAt(i);</span><br><span class="line">    <span class="keyword">if</span> (item.getBookTypeName().equals(bookTypeName)) &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookTypeJcb.setSelectedIndex(i);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在这段代码中，下拉框<code>bookTypeJcb</code>的选项是从数据库中读取的，并转换为<code>BookType</code>对象保存在下拉框中。因此，在设置下拉框选项时，需要通过循环遍历下拉框的所有选项，并将<code>BookType</code>对象转换为字符串后与目标行的书籍类型名称进行比较，从而找到对应的选项并将其设置为下拉框的选中项。</p>
<h2 id="4-修改操作"><a href="#4-修改操作" class="headerlink" title="4.修改操作"></a>4.修改操作</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab3d7a428.png" alt="image-20230218210131160"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 图书修改事件处理</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> evt</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">bookUpdateActionPerformed</span><span class="params">(ActionEvent evt)</span> &#123;</span><br><span class="line">		String id=<span class="built_in">this</span>.idTxt.getText();</span><br><span class="line">		<span class="keyword">if</span>(StringUtil.isEmpty(id))&#123;</span><br><span class="line">			JOptionPane.showMessageDialog(<span class="literal">null</span>,<span class="string">&quot;请选择要修改的记录&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		String bookName=<span class="built_in">this</span>.bookNameTxt.getText();</span><br><span class="line">		String author=<span class="built_in">this</span> .authorTxt.getText();</span><br><span class="line">		String price=<span class="built_in">this</span>.priceTxt.getText();</span><br><span class="line">		String bookDesc=<span class="built_in">this</span>.bookDescTxt.getText();</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span>(StringUtil.isEmpty(bookName)) &#123;</span><br><span class="line">			JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;图书名称不能为空！&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(StringUtil.isEmpty(author)) &#123;</span><br><span class="line">			JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;图书作者不能为空！&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(StringUtil.isEmpty(price)) &#123;</span><br><span class="line">			JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;图书价格不能为空！&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		String sex=<span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">if</span>(manJrb.isSelected()) &#123;</span><br><span class="line">			sex=<span class="string">&quot;男&quot;</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span>(femaleJrb.isSelected()) &#123;</span><br><span class="line">			sex=<span class="string">&quot;女&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		BookType bookType=(BookType) bookTypeJcb.getSelectedItem();</span><br><span class="line">		<span class="type">int</span> bookTypeId=bookType.getId();</span><br><span class="line">		</span><br><span class="line">		Book book=<span class="keyword">new</span> <span class="title class_">Book</span>(Integer.parseInt(id),bookName,author, sex, Float.parseFloat(price), bookTypeId,bookDesc);</span><br><span class="line">		</span><br><span class="line">		<span class="type">Connection</span> <span class="variable">con</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			con=dbUtil.getCon();</span><br><span class="line">			<span class="type">int</span> addNum=bookDao.update(con, book);</span><br><span class="line">			<span class="keyword">if</span>(addNum==<span class="number">1</span>) &#123;</span><br><span class="line">				JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;图书修改成功！&quot;</span>);</span><br><span class="line">				resetValue();</span><br><span class="line">                <span class="built_in">this</span>.fillTable(<span class="keyword">new</span> <span class="title class_">Book</span>());</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">				JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;图书修改失败！&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;图书修改失败！&quot;</span>);</span><br><span class="line">		&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				dbUtil.closeCon(con);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">				<span class="comment">// TODO 自动生成的 catch 块</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 重置表单</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">resetValue</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.idTxt.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">		<span class="built_in">this</span>.bookNameTxt.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">		<span class="built_in">this</span>.authorTxt.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">		<span class="built_in">this</span>.priceTxt.setText(<span class="string">&quot;&quot;</span>) ;</span><br><span class="line">		<span class="built_in">this</span>.manJrb.setSelected(<span class="literal">true</span>);</span><br><span class="line">		<span class="built_in">this</span>.bookDescTxt.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">this</span>.bookTypeJcb.getItemCount()&gt;<span class="number">0</span>) &#123;</span><br><span class="line">			<span class="built_in">this</span>.bookTypeJcb.setSelectedIndex(<span class="number">0</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>



<p>测试</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab3cbb156.png" alt="image-20230218211504142"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab3e7d9d0.png" alt="image-20230218211543138"></p>
<h2 id="5-删除事件"><a href="#5-删除事件" class="headerlink" title="5.删除事件"></a>5.删除事件</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab3eefb34.png" alt="image-20230218212018610"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 图书删除事件处理</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> evt</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">bookDeleteActionPerformed</span><span class="params">(ActionEvent evt)</span> &#123;</span><br><span class="line">		String id=idTxt.getText();</span><br><span class="line">		<span class="keyword">if</span>(StringUtil.isEmpty(id)) &#123;</span><br><span class="line">			JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;请选择要删除的记录&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="type">int</span> n=JOptionPane.showConfirmDialog(<span class="literal">null</span>, <span class="string">&quot;确定要删除该记录吗？&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(n==<span class="number">0</span>) &#123;</span><br><span class="line">			Connection con=<span class="literal">null</span>;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				con=dbUtil.getCon();</span><br><span class="line">				<span class="type">int</span> deleteNum=bookTypeDao.delete(con, id);</span><br><span class="line">				<span class="keyword">if</span>(deleteNum==<span class="number">1</span>) &#123;</span><br><span class="line">					JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;删除成功&quot;</span>);</span><br><span class="line">					<span class="built_in">this</span>.resetValue();</span><br><span class="line">					<span class="built_in">this</span>.fillTable(<span class="keyword">new</span> <span class="title class_">Book</span>());</span><br><span class="line">				&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">					JOptionPane.showMessageDialog(<span class="literal">null</span>, <span class="string">&quot;删除失败&quot;</span>);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;<span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					dbUtil.closeCon(con);</span><br><span class="line">				&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">					</span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab3e8fa91.png" alt="image-20230218212725138"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/31/64f0ab3fa115a.png" alt="image-20230218213940291"></p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/07/24/64bdbe3230106.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/07/24/64bdbe3230106.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">Zach</div><div class="post-copyright__author_desc">内心湛然，则无往而不乐。</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://blog.kinguo.fun/2023/08/31/Library-management-system/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://blog.kinguo.fun/2023/08/31/Library-management-system/')">图书管理系统</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://bu.dusays.com/2023/07/24/64be09a7804da.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/07/24/64be09a7804da.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://bu.dusays.com/2023/07/24/64be09a7804d9.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/07/24/64be09a7804d9.png" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://blog.kinguo.fun/2023/08/31/Library-management-system/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=图书管理系统&amp;url=https://blog.kinguo.fun/2023/08/31/Library-management-system/&amp;pic=https://bu.dusays.com/2023/09/02/64f305f823e48.jpg" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.kinguo.fun" target="_blank">ZACH</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E7%AC%94%E8%AE%B0/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>笔记<span class="tagsPageCount">4</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://bu.dusays.com/2024/12/04/6750113c94c1e.png" data-sites="wechat,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/08/29/tomcat/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/12/04/6750119b7d0df.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Tomcat 环境配置</div></div></a></div><div class="next-post pull-right"><a href="/2023/09/14/maven/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/12/04/6750121e798c5.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Maven 环境配置</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>猜你喜欢</span></div><div class="relatedPosts-list"><div><a href="/2023/09/14/maven/" title="Maven 环境配置"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/12/04/6750121e798c5.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-09-14</div><div class="title">Maven 环境配置</div></div></a></div><div><a href="/2023/07/10/mysql-notes/" title="MySql 笔记"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/20/64e2200750627.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-07-10</div><div class="title">MySql 笔记</div></div></a></div><div><a href="/2023/09/25/sjk/" title="HTML"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/12/04/675011e7da946.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-09-25</div><div class="title">HTML</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)" style="display: none">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar" title="点击展开"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/07/24/64bdbe3230106.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2021/03/03/a4e4da2bf1776.png" ait="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">摄影、设计、开发</b>相关的问题和看法，还有<b style="color:#fff">摄影教程</b>和<b style="color:#fff">文章分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/about/"><h1 class="author-info__name">Zach</h1><div class="author-info__desc">内心湛然，则无往而不乐。</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://v.douyin.com/i371mrk/" target="_blank" title="tiktok"><i class="anzhiyufont anzhiyu-icon-tiktok"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/431042115" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来看我的博客鸭~</div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/07/25/64bf8f5b7bc1a.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%87%86%E5%A4%87%E9%98%B6%E6%AE%B5"><span class="toc-number">1.</span> <span class="toc-text">一、准备阶段</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%85Eclipse%E6%8F%92%E4%BB%B6Windowbuilder"><span class="toc-number">1.1.</span> <span class="toc-text">1.安装Eclipse插件Windowbuilder</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E6%B7%BB%E5%8A%A0%E8%A1%A8"><span class="toc-number">1.2.</span> <span class="toc-text">2.创建数据库添加表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E7%94%A8JDBC%E9%93%BE%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.3.</span> <span class="toc-text">3.用JDBC链接数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E5%B7%A5%E5%85%B7%E5%8C%85"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.创建工具包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%94%A8JDBC%E9%93%BE%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93-%E5%88%86%E4%B8%BA%E4%BB%A5%E4%B8%8B%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.3.2.</span> <span class="toc-text">2.用JDBC链接数据库 分为以下步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%B3%A8%E5%86%8C%E9%A9%B1%E5%8A%A8"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">1.注册驱动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%8E%B7%E5%8F%96%E9%93%BE%E6%8E%A5"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">2.获取链接*</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%AE%9A%E4%B9%89sql"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">3.定义sql</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E8%8E%B7%E5%8F%96%E6%89%A7%E8%A1%8Csql%E7%9A%84%E5%AF%B9%E8%B1%A1-Statement"><span class="toc-number">1.3.2.4.</span> <span class="toc-text">4.获取执行sql的对象 Statement*</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%89%A7%E8%A1%8Csql"><span class="toc-number">1.3.2.5.</span> <span class="toc-text">5.执行sql*</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%A4%84%E7%90%86%E7%BB%93%E6%9E%9C"><span class="toc-number">1.3.2.6.</span> <span class="toc-text">6.处理结果</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E9%87%8A%E6%94%BE%E8%B5%84%E6%BA%90"><span class="toc-number">1.3.2.7.</span> <span class="toc-text">7.释放资源</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%AF%BC%E5%8C%85"><span class="toc-number">1.4.</span> <span class="toc-text">4.导包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%98%AF%E5%90%A6%E6%88%90%E5%8A%9F"><span class="toc-number">1.5.</span> <span class="toc-text">5.测试数据库连接是否成功</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-MVC%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.6.</span> <span class="toc-text">6.MVC模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#dao%E5%B1%82"><span class="toc-number">1.6.1.</span> <span class="toc-text">dao层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#model%E5%B1%82"><span class="toc-number">1.6.2.</span> <span class="toc-text">model层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Util%E5%B1%82"><span class="toc-number">1.6.3.</span> <span class="toc-text">Util层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#view%E5%B1%82-%E4%BD%BF%E7%94%A8%E6%8F%92%E4%BB%B6"><span class="toc-number">1.6.4.</span> <span class="toc-text">view层 使用插件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%9C%A8%E8%AE%BE%E7%BD%AE%E6%A0%87%E9%A2%98%E6%97%B6%E5%87%BA%E7%8E%B0%E4%BA%86WindowBuilder-was-not-able-to-show-the-GUI"><span class="toc-number">1.6.4.0.1.</span> <span class="toc-text">1.在设置标题时出现了WindowBuilder was not able to show the GUI</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%99%BB%E9%99%86%E7%95%8C%E9%9D%A2%E8%AE%BE%E8%AE%A1"><span class="toc-number">2.</span> <span class="toc-text">二、登陆界面设计</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#0-Swing%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="toc-number">2.1.</span> <span class="toc-text">0. Swing基础概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#java-awt-%E5%8C%85"><span class="toc-number">2.1.0.1.</span> <span class="toc-text">java.awt 包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#javax-swing-%E5%8C%85"><span class="toc-number">2.1.0.2.</span> <span class="toc-text">javax.swing 包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6"><span class="toc-number">2.1.0.3.</span> <span class="toc-text">组件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%BB%84%E4%BB%B6%EF%BC%9A"><span class="toc-number">2.1.0.3.1.</span> <span class="toc-text">基本组件：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E7%BB%84%E4%BB%B6%EF%BC%9A"><span class="toc-number">2.1.0.3.2.</span> <span class="toc-text">容器组件：</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%88%A9%E7%94%A8Windowbuilder%E7%9A%84JFrame"><span class="toc-number">2.2.</span> <span class="toc-text">1.利用Windowbuilder的JFrame</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A0%E5%85%B6%E4%B8%AD%E8%B0%83%E8%8A%82%E5%88%B0Design%E7%AA%97%E5%8F%A3%E5%B9%B6%E4%B8%94%E8%AE%BE%E7%BD%AE%E6%A0%87%E9%A2%98%E5%92%8C%E9%94%81%E5%AE%9A%E7%AA%97%E5%8F%A3%E5%A4%A7%E5%B0%8F"><span class="toc-number">2.2.1.</span> <span class="toc-text">①其中调节到Design窗口并且设置标题和锁定窗口大小</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A1%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80%E9%80%89%E6%8B%A9"><span class="toc-number">2.2.2.</span> <span class="toc-text">②界面布局选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A2%E6%B7%BB%E5%8A%A0JLabel%E7%BB%84%E4%BB%B6%E5%B9%B6%E4%B8%94%E8%AE%BE%E7%BD%AE%E5%9B%BE%E6%A0%87"><span class="toc-number">2.2.3.</span> <span class="toc-text">③添加JLabel组件并且设置图标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A3%E7%BB%99%E7%BB%84%E4%BB%B6%E9%87%8D%E5%91%BD%E5%90%8D"><span class="toc-number">2.2.4.</span> <span class="toc-text">④给组件重命名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A4%E6%B7%BB%E5%8A%A0%E6%8C%89%E9%92%AE%E7%99%BB%E5%BD%95%E5%92%8C%E9%87%8D%E7%BD%AE"><span class="toc-number">2.2.5.</span> <span class="toc-text">⑤添加按钮登录和重置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A5%E6%96%B0%E5%BB%BA%E4%BA%8B%E4%BB%B6"><span class="toc-number">2.2.6.</span> <span class="toc-text">⑥新建事件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E9%87%8D%E7%BD%AE%E4%BA%8B%E4%BB%B6"><span class="toc-number">2.2.6.1.</span> <span class="toc-text">1.重置事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%99%BB%E5%BD%95%E4%BA%8B%E4%BB%B6"><span class="toc-number">2.2.6.2.</span> <span class="toc-text">2.登录事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.2.6.3.</span> <span class="toc-text">3.连接数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%9C%A8User%E7%B1%BB%E4%B8%AD%E5%88%9B%E5%BB%BA%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-number">2.2.6.4.</span> <span class="toc-text">4.在User类中创建构造方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%88%90%E5%8A%9F%E8%BF%90%E8%A1%8C%E6%88%AA%E5%9B%BE"><span class="toc-number">2.2.6.5.</span> <span class="toc-text">5.成功运行截图</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link"><span class="toc-number">2.2.6.5.0.1.</span> <span class="toc-text"></span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E7%BC%96%E5%86%99%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">2.2.6.6.</span> <span class="toc-text">6.编写过程中的问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A6%E7%BB%99%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2%E5%B1%85%E4%B8%AD%E6%98%BE%E7%A4%BA"><span class="toc-number">2.2.7.</span> <span class="toc-text">⑦给登录界面居中显示</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E7%B3%BB%E7%BB%9F%E4%B8%BB%E7%95%8C%E9%9D%A2%E5%AE%9E%E7%8E%B0"><span class="toc-number">3.</span> <span class="toc-text">三、系统主界面实现</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%92%8C%E5%89%8D%E9%9D%A2%E4%B8%80%E6%A0%B7%E8%BF%98%E6%98%AF%E4%BD%BF%E7%94%A8Windowbuilder%E7%9A%84JFrame"><span class="toc-number">3.1.</span> <span class="toc-text">1.和前面一样还是使用Windowbuilder的JFrame</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8Menu%E4%B8%AD%E7%9A%84JMenuBar%E5%92%8CJMenu"><span class="toc-number">3.2.</span> <span class="toc-text">2.使用Menu中的JMenuBar和JMenu</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-JMenu%E5%92%8CJMenultem%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">3.3.</span> <span class="toc-text">3.JMenu和JMenultem的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%B7%BB%E5%8A%A0%E5%90%84%E6%8C%89%E9%92%AE%E5%9B%BE%E6%A0%87"><span class="toc-number">3.4.</span> <span class="toc-text">4.添加各按钮图标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E4%B8%BB%E9%A1%B5%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8BorderLayout%E5%B9%B6%E4%BD%BF%E7%94%A8JDesktopPane"><span class="toc-number">3.5.</span> <span class="toc-text">5.主页内部使用BorderLayout并使用JDesktopPane</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JDesktopPane"><span class="toc-number">3.5.1.</span> <span class="toc-text">JDesktopPane</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E8%AE%BE%E7%BD%AE%E6%9C%80%E5%A4%A7%E5%8C%96"><span class="toc-number">3.6.</span> <span class="toc-text">6.设置最大化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E4%B8%8E%E5%89%8D%E9%9D%A2%E7%9A%84%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2%E8%BF%9B%E8%A1%8C%E4%BA%92%E5%8A%A8"><span class="toc-number">3.7.</span> <span class="toc-text">7.与前面的登录界面进行互动</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E8%AE%BE%E7%BD%AE%E5%86%85%E9%83%A8%E7%AA%97%E4%BD%93"><span class="toc-number">4.</span> <span class="toc-text">四、设置内部窗体</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%B7%BB%E5%8A%A0JInternalFrame"><span class="toc-number">4.1.</span> <span class="toc-text">1.添加JInternalFrame</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%85%B3%E4%BA%8E%E4%BD%9C%E8%80%85%E7%95%8C%E9%9D%A2%E6%89%93%E5%BC%80%E5%8F%AF%E5%85%B3%E9%97%AD%E5%92%8C%E5%8F%AF%E7%BC%A9%E5%B0%8F"><span class="toc-number">4.2.</span> <span class="toc-text">2.关于作者界面打开可关闭和可缩小</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E4%B8%8E%E5%89%8D%E9%9D%A2%E7%9A%84%E7%B3%BB%E7%BB%9F%E4%B8%BB%E7%95%8C%E9%9D%A2%E8%81%94%E5%8A%A8-%E4%BA%8B%E4%BB%B6"><span class="toc-number">4.3.</span> <span class="toc-text">3.与前面的系统主界面联动 事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Rename"><span class="toc-number">4.3.1.</span> <span class="toc-text">Rename</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">4.4.</span> <span class="toc-text">4.遇到的问题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%AE%89%E5%85%A8%E9%80%80%E5%87%BA%E5%8A%9F%E8%83%BD"><span class="toc-number">5.</span> <span class="toc-text">五、安全退出功能</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E5%9B%BE%E4%B9%A6%E7%B1%BB%E5%88%AB%E6%B7%BB%E5%8A%A0%E5%8A%9F%E8%83%BD"><span class="toc-number">6.</span> <span class="toc-text">六、图书类别添加功能</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E5%9B%BE%E4%B9%A6%E7%B1%BB%E5%88%AB%E8%A1%A8-t-booktype"><span class="toc-number">6.1.</span> <span class="toc-text">1.创建图书类别表 t_booktype</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%96%B0%E5%BB%BA%E5%9B%BE%E4%B9%A6%E7%B1%BB%E5%88%AB%E5%AE%9E%E4%BD%93%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5"><span class="toc-number">6.2.</span> <span class="toc-text">2.新建图书类别实体与数据库连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A0%E6%96%B0%E5%BB%BA%E5%9B%BE%E4%B9%A6%E7%B1%BB%E5%88%AB%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="toc-number">6.2.1.</span> <span class="toc-text">①新建图书类别实体类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A1%E5%9B%BE%E4%B9%A6%E7%B1%BB%E5%88%AB%E8%BF%94%E5%9B%9E%E7%B1%BB%E4%BB%A5%E5%8F%8A%E5%AE%9E%E7%8E%B0%E6%B7%BB%E5%8A%A0%E6%93%8D%E4%BD%9C"><span class="toc-number">6.2.2.</span> <span class="toc-text">②图书类别返回类以及实现添加操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%88%9B%E5%BB%BABookTypeAddInterFrm%E7%9A%84JInternalFrame%E7%9A%84%E7%AA%97%E4%BD%93"><span class="toc-number">6.3.</span> <span class="toc-text">3.创建BookTypeAddInterFrm的JInternalFrame的窗体</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%9B%BE%E4%B9%A6%E7%B1%BB%E5%88%AB%E6%B7%BB%E5%8A%A0%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-number">6.4.</span> <span class="toc-text">4.图书类别添加事件处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">6.5.</span> <span class="toc-text">5.遇到的问题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E5%9B%BE%E4%B9%A6%E7%B1%BB%E5%88%AB%E6%9F%A5%E8%AF%A2%E5%8A%9F%E8%83%BD"><span class="toc-number">7.</span> <span class="toc-text">七、图书类别查询功能</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%9C%A8Dao%E5%B1%82%E6%B7%BB%E5%8A%A0%E6%9F%A5%E8%AF%A2%E6%96%B9%E6%B3%95"><span class="toc-number">7.1.</span> <span class="toc-text">1.在Dao层添加查询方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%88%9B%E5%BB%BA%E6%9F%A5%E8%AF%A2JInterna-Frame%E7%95%8C%E9%9D%A2"><span class="toc-number">7.2.</span> <span class="toc-text">2.创建查询JInterna|Frame界面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5"><span class="toc-number">7.3.</span> <span class="toc-text">3.与数据库连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A0%E5%86%99%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E7%94%A8%E6%9D%A5%E7%8B%AC%E7%AB%8B%E5%B0%81%E8%A3%85%E6%95%B0%E6%8D%AE"><span class="toc-number">7.3.1.</span> <span class="toc-text">①写一个方法用来独立封装数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A1%E5%9C%A8Mainfrm%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%BA%8B%E4%BB%B6"><span class="toc-number">7.3.2.</span> <span class="toc-text">②在Mainfrm中添加事件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%A0%B9%E6%8D%AE%E8%BE%93%E5%85%A5%E7%9A%84%E5%86%85%E5%AE%B9%E6%9F%A5%E8%AF%A2"><span class="toc-number">7.4.</span> <span class="toc-text">4.根据输入的内容查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A0%E5%88%9B%E5%BB%BA%E7%AA%97%E5%8F%A3"><span class="toc-number">7.4.1.</span> <span class="toc-text">①创建窗口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A1%E6%B7%BB%E5%8A%A0%E4%BA%8B%E4%BB%B6"><span class="toc-number">7.4.2.</span> <span class="toc-text">②添加事件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98-1"><span class="toc-number">7.5.</span> <span class="toc-text">5.遇到的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A0%E5%9C%A8%E6%B5%8B%E8%AF%95%E6%9F%A5%E8%AF%A2%E5%8A%9F%E8%83%BD%E6%97%B6%E5%8F%88%E5%87%BA%E7%8E%B0%E7%A9%BA%E6%8C%87%E9%92%88%E9%97%AE%E9%A2%98%EF%BC%8C%E8%80%8C%E4%B8%94%E6%95%B0%E6%8D%AE%E6%B2%A1%E6%9C%89%E6%98%BE%E7%A4%BA"><span class="toc-number">7.5.1.</span> <span class="toc-text">①在测试查询功能时又出现空指针问题，而且数据没有显示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A1%E5%9C%A8%E6%90%9C%E7%B4%A2%E8%BF%87%E6%88%90%E5%8F%88%E5%87%BA%E7%8E%B0%E6%9F%A5%E8%AF%A2%E4%B8%8D%E5%88%B0"><span class="toc-number">7.5.2.</span> <span class="toc-text">②在搜索过成又出现查询不到</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E5%9B%BE%E4%B9%A6%E7%B1%BB%E5%88%AB%E4%BF%AE%E6%94%B9%E5%8A%9F%E8%83%BD"><span class="toc-number">8.</span> <span class="toc-text">八、图书类别修改功能</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E9%A6%96%E5%85%88%E5%86%99dao%E5%B1%82"><span class="toc-number">8.1.</span> <span class="toc-text">1.首先写dao层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-view%E5%B1%82"><span class="toc-number">8.2.</span> <span class="toc-text">2.view层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E9%87%8D%E5%91%BD%E5%90%8D%E7%BB%84%E4%BB%B6"><span class="toc-number">8.3.</span> <span class="toc-text">3重命名组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E8%A1%A8%E6%A0%BC%E8%A1%8C%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E4%BA%8B%E4%BB%B6"><span class="toc-number">8.4.</span> <span class="toc-text">4.表格行点击事件处理事件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E4%BF%AE%E6%94%B9%E4%BA%8B%E4%BB%B6"><span class="toc-number">8.5.</span> <span class="toc-text">5.修改事件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">8.6.</span> <span class="toc-text">6.遇到的问题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E5%9B%BE%E4%B9%A6%E7%B1%BB%E5%88%AB%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD"><span class="toc-number">9.</span> <span class="toc-text">九、图书类别删除功能</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%9B%BE%E4%B9%A6%E7%B1%BB%E5%88%AB%E5%88%A0%E9%99%A4%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-number">9.1.</span> <span class="toc-text">1.图书类别删除事件处理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E5%9B%BE%E4%B9%A6%E6%B7%BB%E5%8A%A0%E5%8A%9F%E8%83%BD"><span class="toc-number">10.</span> <span class="toc-text">十、图书添加功能</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%B8%BA%E5%9B%BE%E4%B9%A6%E6%B7%BB%E5%8A%A0%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">10.1.</span> <span class="toc-text">1.为图书添加创建数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%96%B0%E5%BB%BA%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1"><span class="toc-number">10.2.</span> <span class="toc-text">2.新建架构设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BD%93model"><span class="toc-number">10.3.</span> <span class="toc-text">3.创建实体model</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%88%9B%E5%BB%BABook-dao%E5%B1%82"><span class="toc-number">10.4.</span> <span class="toc-text">4.创建Book dao层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%88%9B%E5%BB%BAview%E5%B1%82"><span class="toc-number">10.5.</span> <span class="toc-text">5.创建view层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E4%B8%8E%E4%B9%8B%E5%89%8D%E7%9A%84%E4%B8%BB%E7%95%8C%E9%9D%A2%E5%85%B3%E8%81%94"><span class="toc-number">10.6.</span> <span class="toc-text">6.与之前的主界面关联</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E5%9B%BE%E4%B9%A6%E7%B1%BB%E5%88%AB%E4%B8%8B%E6%8B%89%E6%A1%86"><span class="toc-number">10.7.</span> <span class="toc-text">7.图书类别下拉框</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A0%E5%9C%A8BookAddInterFrm%E4%B8%AD%E5%B0%81%E8%A3%85%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E7%94%A8%E4%BA%8E%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9B%BE%E4%B9%A6%E7%B1%BB%E5%88%AB%E4%B8%8B%E6%8B%89%E6%A1%86"><span class="toc-number">10.7.1.</span> <span class="toc-text">①在BookAddInterFrm中封装一个方法用于初始化图书类别下拉框</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A1%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">10.7.2.</span> <span class="toc-text">②遇到的问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E5%9B%BE%E4%B9%A6%E6%B7%BB%E5%8A%A0%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-number">10.8.</span> <span class="toc-text">8.图书添加事件处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E5%9B%BE%E4%B9%A6%E9%87%8D%E7%BD%AE%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-number">10.9.</span> <span class="toc-text">9.图书重置事件处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A0%E6%B5%8B%E8%AF%95%E4%B8%80%E4%B8%8B"><span class="toc-number">10.9.1.</span> <span class="toc-text">①测试一下</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A1%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98-1"><span class="toc-number">10.9.2.</span> <span class="toc-text">②遇到的问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E5%9B%BE%E4%B9%A6%E6%9F%A5%E8%AF%A2%E5%8A%9F%E8%83%BD"><span class="toc-number">11.</span> <span class="toc-text">十一、图书查询功能</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%9B%BE%E4%B9%A6%E6%9F%A5%E8%AF%A2%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-number">11.1.</span> <span class="toc-text">1.图书查询功能实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%AE%9E%E7%8E%B0%E5%86%85%E9%83%A8%E7%AA%97%E4%BD%93"><span class="toc-number">11.2.</span> <span class="toc-text">2.实现内部窗体</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0%E4%B8%8B%E6%8B%89%E8%8F%9C%E5%8D%95"><span class="toc-number">11.3.</span> <span class="toc-text">3.代码实现下拉菜单</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%88%9D%E5%A7%8B%E5%8C%96%E8%A1%A8%E6%A0%BC%E6%95%B0%E6%8D%AE"><span class="toc-number">11.4.</span> <span class="toc-text">4.初始化表格数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%9B%BE%E4%B9%A6%E6%9F%A5%E8%AF%A2%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-number">11.5.</span> <span class="toc-text">5.图书查询事件处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">11.6.</span> <span class="toc-text">6.出现的问题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E5%9B%BE%E4%B9%A6%E4%BF%AE%E6%94%B9%E4%B8%8E%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD"><span class="toc-number">12.</span> <span class="toc-text">十二、图书修改与删除功能</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Dao%E5%B1%82"><span class="toc-number">12.1.</span> <span class="toc-text">1.Dao层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-viem%E5%B1%82"><span class="toc-number">12.2.</span> <span class="toc-text">2.viem层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E8%A1%A8%E6%A0%BC%E8%A1%8C%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-number">12.3.</span> <span class="toc-text">3.表格行点击事件处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E4%BF%AE%E6%94%B9%E6%93%8D%E4%BD%9C"><span class="toc-number">12.4.</span> <span class="toc-text">4.修改操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%88%A0%E9%99%A4%E4%BA%8B%E4%BB%B6"><span class="toc-number">12.5.</span> <span class="toc-text">5.删除事件</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/03/11/Lijiang/" title="旅拍 | 丽江晨雾，细腻风景"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/12/04/6750113c94c1e.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="旅拍 | 丽江晨雾，细腻风景"/></a><div class="content"><a class="title" href="/2024/03/11/Lijiang/" title="旅拍 | 丽江晨雾，细腻风景">旅拍 | 丽江晨雾，细腻风景</a><time datetime="2024-03-11T12:16:43.000Z" title="发表于 2024-03-11 20:16:43">2024-03-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/08/vscode/" title="在VS Code中部署TomCat，以及Maven"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/12/04/6750118b0255e.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="在VS Code中部署TomCat，以及Maven"/></a><div class="content"><a class="title" href="/2023/11/08/vscode/" title="在VS Code中部署TomCat，以及Maven">在VS Code中部署TomCat，以及Maven</a><time datetime="2023-11-08T12:34:33.000Z" title="发表于 2023-11-08 20:34:33">2023-11-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/08/Hackintosh/" title="Hackintosh 安装教程"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/12/04/675011be97b95.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hackintosh 安装教程"/></a><div class="content"><a class="title" href="/2023/11/08/Hackintosh/" title="Hackintosh 安装教程">Hackintosh 安装教程</a><time datetime="2023-11-08T06:03:42.000Z" title="发表于 2023-11-08 14:03:42">2023-11-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/25/sjk/" title="HTML"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/12/04/675011e7da946.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="HTML"/></a><div class="content"><a class="title" href="/2023/09/25/sjk/" title="HTML">HTML</a><time datetime="2023-09-25T13:48:36.000Z" title="发表于 2023-09-25 21:48:36">2023-09-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/14/maven/" title="Maven 环境配置"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2024/12/04/6750121e798c5.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Maven 环境配置"/></a><div class="content"><a class="title" href="/2023/09/14/maven/" title="Maven 环境配置">Maven 环境配置</a><time datetime="2023-09-14T02:44:12.000Z" title="发表于 2023-09-14 10:44:12">2023-09-14</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:1848713053@qq.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/ZachAceGuo" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/07/24/64bdbe3230106.png" size="50px"/><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/431042115" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://v.douyin.com/iJFhqpTp/" title="抖音"><i class="anzhiyufont anzhiyu-icon-tiktok"></i></a></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="51la统计" target="_blank" rel="noopener" href="https://v6.51.la/">51la统计</a><a class="footer-item" title="十年之约" target="_blank" rel="noopener" href="https://www.foreverblog.cn/">十年之约</a><a class="footer-item" title="开往" target="_blank" rel="noopener" href="https://github.com/travellings-link/travellings">开往</a></div></div><div class="footer-group"><div class="footer-title">主题</div><div class="footer-links"><a class="footer-item" title="文档" href="/docs/">文档</a><a class="footer-item" title="源码" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu">源码</a><a class="footer-item" title="更新日志" href="/update/">更新日志</a></div></div><div class="footer-group"><div class="footer-title">导航</div><div class="footer-links"><a class="footer-item" title="即刻短文" href="/essay/">即刻短文</a><a class="footer-item" title="友链文章" href="/fcircle/">友链文章</a><a class="footer-item" title="留言板" href="/comments/">留言板</a></div></div><div class="footer-group"><div class="footer-title">协议</div><div class="footer-links"><a class="footer-item" title="隐私协议" href="/privacy/">隐私协议</a><a class="footer-item" title="Cookies" href="/cookies/">Cookies</a><a class="footer-item" title="版权协议" href="/copyright/">版权协议</a></div></div><div class="footer-group"><div class="footer-title-group"><div class="footer-title">友链</div><a class="random-friends-btn" id="footer-random-friends-btn" href="javascript:addFriendLinksInFooter();" title="换一批友情链接"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i></a></div><div class="footer-links" id="friend-links-in-footer"></div></div></div><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shields.io/badge/Zach-%E4%B8%8A%E8%AF%BE%E6%91%B8%E9%B1%BC%E4%B8%AD-8A2BE2" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"/><div id="runtimeTextTip"></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2023 - 2024 By <a class="footer-bar-link" href="/" title="Zach" target="_blank">Zach</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a><a class="footer-bar-link" target="_blank" rel="noopener" href="https://7bu.top/" title="图床">图床</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">10</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">2</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://kinguo.fun/" title="个人首页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.kinguo.fun/1%20(4).png" alt="个人首页"/><span class="back-menu-item-text">个人首页</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=7854846937&amp;server=netease"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/%E5%8D%9A%E5%AE%A2%E7%BE%8E%E5%8C%96/" style="font-size: 0.88rem;">博客美化<sup>1</sup></a><a href="/tags/%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/" style="font-size: 0.88rem;">安装教程<sup>1</sup></a><a href="/tags/%E6%91%84%E5%BD%B1-%E6%97%85%E6%B8%B8/" style="font-size: 0.88rem;">摄影 旅游<sup>1</sup></a><a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 0.88rem;">教程<sup>2</sup></a><a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 0.88rem;">笔记<sup>4</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="7854846937" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.music.163.com/m/playlist?id=7854846937&amp;userid=480890695&amp;creatorId=480890695&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.4/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/28/2023 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2023 By 安知鱼 V1.6.3",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Zach 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("04/28/2023 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      img.src = "https://img.shields.io/badge/Zach-%E4%B8%8B%E8%AF%BE%E5%95%A6-Green";
      img.title = "下课了就该开开心心的玩耍，嘿嘿~";
      img.alt = "下课了就该开开心心的玩耍，嘿嘿~";

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://vercel.kinguo.fun/',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.17/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://vercel.kinguo.fun/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://vercel.kinguo.fun/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.17/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/fireworks.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>